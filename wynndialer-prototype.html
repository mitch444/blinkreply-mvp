<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>WynnDialer Prototype</title>
  <style>
    :root {
      --bg: #ffffff;
      --surface: #ffffff;
      --line: #e7ebf3;
      --text: #11224a;
      --muted: #61708d;
      --gold: #f4b400;
      --gold-deep: #dba100;
      --soft: #f4f7fb;
      --radius: 12px;
      --shadow: 0 14px 34px rgba(17, 34, 74, 0.08);
      --shadow-soft: 0 8px 24px rgba(17, 34, 74, 0.06);
      --max: 1300px;
    }

    * {
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      margin: 0;
      background: var(--bg);
      color: var(--text);
      font-family: "Poppins", Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
      line-height: 1.45;
      -webkit-font-smoothing: antialiased;
      text-rendering: optimizeLegibility;
    }

    body.wd-lock {
      overflow: hidden;
    }

    .wd-shell {
      width: min(100% - 44px, var(--max));
      margin-inline: auto;
    }

    .wd-nav {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 60;
      background: rgba(255, 255, 255, 0.98);
      border-bottom: 1px solid var(--line);
      backdrop-filter: blur(4px);
    }

    .wd-nav-inner {
      min-height: 74px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      padding: 14px 0;
    }

    .wd-brand {
      font-size: 1.18rem;
      letter-spacing: -0.02em;
      font-weight: 700;
      color: var(--text);
      text-decoration: none;
      white-space: nowrap;
    }

    .wd-nav-actions {
      display: flex;
      align-items: center;
      justify-content: flex-end;
      gap: 12px;
      flex-wrap: wrap;
    }

    .wd-select {
      height: 38px;
      min-width: 228px;
      border-radius: 10px;
      border: 1px solid #dbe2ef;
      background: #fff;
      color: var(--text);
      padding: 0 12px;
      font-size: 0.92rem;
      outline: none;
      transition: border-color 180ms ease, box-shadow 180ms ease;
    }

    .wd-select:focus {
      border-color: #b6c3de;
      box-shadow: 0 0 0 3px rgba(98, 118, 160, 0.12);
    }

    .wd-rep {
      font-size: 0.86rem;
      color: var(--muted);
      white-space: nowrap;
      border: 1px solid #e5eaf4;
      background: #fff;
      border-radius: 999px;
      padding: 8px 12px;
    }

    .wd-rep strong {
      color: var(--text);
      font-weight: 650;
    }

    .wd-end-link {
      border: 0;
      background: transparent;
      color: var(--muted);
      font-size: 0.86rem;
      cursor: pointer;
      text-decoration: underline;
      text-underline-offset: 2px;
      padding: 0;
      transition: color 160ms ease;
    }

    .wd-end-link:hover {
      color: #2d416f;
    }

    .wd-main {
      padding: 94px 0 40px;
    }

    .wd-layout {
      display: grid;
      grid-template-columns: minmax(0, 1.9fr) minmax(0, 1.1fr);
      gap: 26px;
      align-items: start;
    }

    .wd-card {
      background: var(--surface);
      border: 1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow-soft);
    }

    .wd-engine {
      padding: 24px;
      box-shadow: var(--shadow);
      display: grid;
      gap: 16px;
    }

    .wd-overline {
      font-size: 0.76rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: #7485a3;
      font-weight: 650;
      margin-bottom: 8px;
    }

    .wd-engine h1 {
      margin: 0;
      letter-spacing: -0.02em;
      font-size: clamp(1.38rem, 2.4vw, 1.92rem);
      line-height: 1.14;
    }

    .wd-engine-top {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 20px;
      flex-wrap: wrap;
      border-bottom: 1px solid var(--line);
      padding-bottom: 14px;
    }

    .wd-goal-stack {
      display: grid;
      gap: 12px;
      min-width: 280px;
    }

    .wd-goals {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px;
    }

    .wd-goal-item {
      border: 1px solid #e4eaf4;
      border-radius: 10px;
      background: #fff;
      padding: 10px;
      display: grid;
      gap: 4px;
    }

    .wd-goal-item span {
      font-size: 0.78rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #7485a3;
      font-weight: 620;
    }

    .wd-goal-item strong {
      font-size: 1.2rem;
      line-height: 1;
      color: var(--text);
      font-weight: 740;
    }

    .wd-goal-item strong.wd-gold-number {
      color: var(--gold);
    }

    .wd-session-bar {
      border: 1px solid #e2e8f3;
      border-radius: 10px;
      background: #fbfdff;
      padding: 12px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      flex-wrap: wrap;
    }

    .wd-session-mode {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-size: 0.84rem;
      letter-spacing: 0.02em;
      font-weight: 640;
      color: #4f638a;
    }

    .wd-mode-dot {
      width: 9px;
      height: 9px;
      border-radius: 50%;
      background: #90a2c3;
      box-shadow: 0 0 0 4px rgba(144, 162, 195, 0.2);
      transition: background-color 180ms ease, box-shadow 180ms ease;
    }

    .wd-mode-dot.is-active {
      background: #4ab57d;
      box-shadow: 0 0 0 4px rgba(74, 181, 125, 0.2);
    }

    .wd-session-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(118px, 1fr));
      gap: 8px;
      min-width: min(100%, 520px);
      width: 100%;
      max-width: 700px;
    }

    .wd-support-stack {
      display: grid;
      gap: 14px;
      border-top: 1px solid var(--line);
      padding-top: 20px;
    }

    .wd-session-item {
      border: 1px solid #e4eaf4;
      border-radius: 8px;
      background: #fff;
      padding: 10px 12px;
      display: grid;
      gap: 4px;
    }

    .wd-session-item span {
      font-size: 0.72rem;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: #7485a3;
      font-weight: 650;
    }

    .wd-session-item strong {
      font-size: 1rem;
      letter-spacing: -0.01em;
      color: #1e355f;
      font-weight: 720;
    }

    .wd-session-item strong.wd-gold-number {
      color: var(--gold);
    }

    .wd-metric-value {
      transition: transform 180ms ease, opacity 180ms ease;
      display: inline-block;
    }

    .wd-metric-value.is-updating {
      transform: translateY(-1px);
      opacity: 0.72;
    }

    .wd-campaign-track {
      border: 1px solid #e3e9f3;
      border-radius: 10px;
      background: #fbfdff;
      padding: 12px;
      display: grid;
      gap: 8px;
    }

    .wd-campaign-track-head {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      flex-wrap: wrap;
      font-size: 0.82rem;
      color: #63748f;
    }

    .wd-campaign-track-head strong {
      color: #213961;
      font-size: 0.9rem;
      letter-spacing: -0.01em;
      font-weight: 700;
    }

    .wd-progress-shell {
      width: 100%;
      height: 8px;
      border-radius: 999px;
      background: #e9eef7;
      overflow: hidden;
    }

    .wd-progress-fill {
      height: 100%;
      width: 0%;
      border-radius: inherit;
      background: var(--gold);
      transition: width 260ms ease;
    }

    .wd-campaign-track-foot {
      display: flex;
      align-items: center;
      gap: 14px;
      flex-wrap: wrap;
      font-size: 0.82rem;
      color: #6a7c9a;
    }

    .wd-campaign-track-foot strong {
      color: #304a75;
      font-weight: 700;
    }

    .wd-status-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 14px;
    }

    .wd-status-pill {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      border-radius: 999px;
      border: 1px solid #dde5f1;
      padding: 8px 12px;
      font-size: 0.84rem;
      font-weight: 650;
      letter-spacing: 0.02em;
      background: #f2f6fc;
      color: #2d426f;
      transition: background-color 200ms ease, color 200ms ease, border-color 200ms ease;
    }

    .wd-status-pill::before {
      content: "";
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: currentColor;
      opacity: 0.85;
    }

    .wd-status-pill[data-state="ready"] {
      background: #f3f7fc;
      border-color: #dde5f1;
      color: #4c5f86;
    }

    .wd-status-pill[data-state="calling-you"] {
      background: #eaf0fb;
      border-color: #d5e0f4;
      color: #274675;
    }

    .wd-status-pill[data-state="dialing-customer"] {
      background: #eaf0fb;
      border-color: #d5e0f4;
      color: #274675;
    }

    .wd-status-pill[data-state="connected"] {
      background: #fff5dc;
      border-color: #f2dda5;
      color: #6a5011;
    }

    .wd-status-pill[data-state="connected-power-mode-active"] {
      background: #fff5dc;
      border-color: #f2dda5;
      color: #6a5011;
    }

    .wd-status-pill[data-state="call-ended"] {
      background: #f2f4f8;
      border-color: #e1e6ee;
      color: #5d6b84;
    }

    .wd-status-pill[data-state="session-ended"],
    .wd-status-pill[data-state="queue-complete"],
    .wd-status-pill[data-state="power-mode-paused"] {
      background: #f2f4f8;
      border-color: #e1e6ee;
      color: #5d6b84;
    }

    .wd-status-pill[data-state="voicemail-delivered"] {
      background: #fff5dc;
      border-color: #f2dda5;
      color: #6a5011;
    }

    .wd-status-pill.is-pulsing {
      animation: wd-gold-pulse 900ms ease;
    }

    @keyframes wd-gold-pulse {
      0% {
        box-shadow: 0 0 0 0 rgba(244, 180, 0, 0.36);
      }
      100% {
        box-shadow: 0 0 0 12px rgba(244, 180, 0, 0);
      }
    }

    .wd-timer {
      font-feature-settings: "tnum" 1;
      font-variant-numeric: tabular-nums;
      color: #4e6187;
      font-size: 0.88rem;
      font-weight: 640;
      border: 1px solid #dbe3f2;
      border-radius: 999px;
      padding: 8px 12px;
      min-width: 78px;
      text-align: center;
    }

    .wd-timer.is-dim {
      opacity: 0.42;
    }

    .wd-pause-indicator {
      margin-top: -8px;
      font-size: 0.84rem;
      color: #5f7091;
      opacity: 0;
      transform: translateY(-2px);
      transition: opacity 180ms ease, transform 180ms ease;
      min-height: 16px;
    }

    .wd-pause-indicator.show {
      opacity: 1;
      transform: translateY(0);
    }

    .wd-voicemail-inline {
      margin-top: -8px;
      min-height: 30px;
      opacity: 0;
      transform: translateY(-2px);
      transition: opacity 180ms ease, transform 180ms ease;
      display: grid;
      gap: 6px;
      align-content: start;
    }

    .wd-voicemail-inline.show {
      opacity: 1;
      transform: translateY(0);
    }

    .wd-voicemail-text {
      font-size: 0.83rem;
      font-weight: 620;
      color: #6f5a1d;
    }

    .wd-voicemail-text.delivered {
      color: #6a5011;
      font-weight: 700;
    }

    .wd-voicemail-progress {
      width: min(260px, 100%);
      height: 5px;
      border-radius: 999px;
      background: #efe5c7;
      overflow: hidden;
      opacity: 0;
      transition: opacity 180ms ease;
    }

    .wd-voicemail-progress.show {
      opacity: 1;
    }

    .wd-voicemail-progress-fill {
      height: 100%;
      width: 0%;
      border-radius: inherit;
      background: var(--gold);
      transition: width 900ms linear;
    }

    .wd-customer-panel {
      display: grid;
      gap: 12px;
      transition: opacity 200ms ease, transform 200ms ease;
    }

    .wd-snapshot-identity {
      transition: opacity 200ms ease, transform 200ms ease;
    }

    .wd-customer-panel.is-fading,
    .wd-snapshot-identity.is-fading {
      opacity: 0;
      transform: translateY(6px);
    }

    .wd-customer-name {
      font-size: clamp(1.72rem, 3vw, 2.4rem);
      font-weight: 760;
      letter-spacing: -0.035em;
      line-height: 1.02;
      margin: 0;
    }

    .wd-customer-name-row {
      display: flex;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
    }

    .wd-vm-sent-tag {
      border: 1px solid #edd79a;
      border-radius: 999px;
      background: #fff5dc;
      color: #6a5011;
      padding: 5px 10px;
      font-size: 0.72rem;
      font-weight: 700;
      letter-spacing: 0.05em;
      text-transform: uppercase;
      opacity: 0;
      transform: translateY(2px);
      transition: opacity 180ms ease, transform 180ms ease;
      pointer-events: none;
    }

    .wd-vm-sent-tag.show {
      opacity: 1;
      transform: translateY(0);
    }

    .wd-customer-meta-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 10px;
    }

    .wd-customer-note {
      border: 1px solid #e2e8f3;
      border-radius: 10px;
      background: #fbfdff;
      padding: 10px 12px;
      display: grid;
      gap: 6px;
    }

    .wd-customer-note span {
      font-size: 0.76rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #7485a3;
      font-weight: 650;
    }

    .wd-customer-note p {
      margin: 0;
      color: #2a416d;
      font-size: 0.92rem;
      line-height: 1.45;
    }

    .wd-meta-item {
      display: grid;
      gap: 4px;
      padding: 10px;
      border: 1px solid #e4eaf4;
      border-radius: 10px;
      background: #fff;
    }

    .wd-meta-item span {
      font-size: 0.76rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #7383a0;
      font-weight: 640;
    }

    .wd-meta-item strong {
      color: var(--text);
      font-size: 1rem;
      letter-spacing: -0.01em;
      font-weight: 650;
      word-break: break-word;
    }

    .wd-badge {
      display: inline-flex;
      align-items: center;
      border-radius: 999px;
      padding: 6px 10px;
      font-size: 0.76rem;
      font-weight: 700;
      letter-spacing: 0.03em;
      width: fit-content;
      text-transform: uppercase;
      border: 1px solid #e2e8f5;
      color: #4e6187;
      background: #f4f7fc;
    }

    .wd-badge.positive {
      background: #fff6e0;
      color: #6b5210;
      border-color: #f1ddab;
    }

    .wd-badge.watch {
      background: #eef3fb;
      color: #36517e;
      border-color: #dde7f6;
    }

    .wd-mileage-item input {
      width: 100%;
      height: 38px;
      border-radius: 10px;
      border: 1px solid #d9e1ef;
      padding: 0 10px;
      outline: none;
      font-size: 0.98rem;
      color: var(--text);
      transition: border-color 180ms ease, box-shadow 180ms ease;
    }

    .wd-mileage-item input:focus {
      border-color: #bac8e0;
      box-shadow: 0 0 0 3px rgba(87, 111, 156, 0.12);
    }

    .wd-action-row {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      border-top: 1px solid var(--line);
      padding-top: 14px;
    }

    .wd-btn {
      border: 1px solid transparent;
      border-radius: 10px;
      min-height: 40px;
      padding: 0 16px;
      font-size: 0.92rem;
      font-weight: 640;
      letter-spacing: 0.01em;
      cursor: pointer;
      transition: transform 170ms ease, background-color 170ms ease, color 170ms ease, border-color 170ms ease, box-shadow 170ms ease;
      white-space: nowrap;
    }

    .wd-btn:focus-visible {
      outline: 2px solid #c8a54a;
      outline-offset: 2px;
    }

    .wd-btn:disabled {
      opacity: 0.45;
      cursor: not-allowed;
      transform: none;
    }

    .wd-btn-primary {
      background: var(--gold);
      border-color: var(--gold);
      color: #2a1d00;
      box-shadow: 0 8px 18px rgba(244, 180, 0, 0.28);
    }

    .wd-btn-primary:hover:not(:disabled) {
      background: var(--gold-deep);
      border-color: var(--gold-deep);
      transform: translateY(-1px);
    }

    .wd-btn-neutral {
      background: #eef2f8;
      border-color: #dbe2ef;
      color: #344b76;
    }

    .wd-btn-neutral:hover:not(:disabled) {
      border-color: #c8d1e2;
      transform: translateY(-1px);
    }

    .wd-btn-danger {
      background: #d1424d;
      border-color: #d1424d;
      color: #ffffff;
    }

    .wd-btn-danger:hover:not(:disabled) {
      background: #ba3642;
      border-color: #ba3642;
      transform: translateY(-1px);
    }

    .wd-btn-outline {
      background: #fff;
      border-color: #d6dfec;
      color: #3a507a;
    }

    .wd-btn-outline:hover:not(:disabled) {
      border-color: #bfcadf;
      transform: translateY(-1px);
    }

    .wd-btn-ghost {
      background: #ffffff;
      border-color: #d8e0ee;
      color: #3b5079;
    }

    .wd-btn-ghost:hover:not(:disabled) {
      border-color: #c0cadb;
      transform: translateY(-1px);
    }

    .wd-voicemail-row {
      margin-top: 4px;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .wd-live-resolution {
      border: 1px solid #e2e8f3;
      border-radius: 10px;
      background: #fbfdff;
      padding: 12px;
      display: grid;
      gap: 10px;
    }

    .wd-live-head {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      flex-wrap: wrap;
    }

    .wd-live-head span {
      font-size: 0.72rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #7485a3;
      font-weight: 650;
    }

    .wd-live-head strong {
      font-size: 0.83rem;
      color: #2f456f;
      font-weight: 700;
    }

    .wd-live-head strong.is-locked {
      color: #6a5011;
    }

    .wd-live-outcomes {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    .wd-live-outcome-btn {
      border: 1px solid #dce4f2;
      border-radius: 8px;
      min-height: 34px;
      padding: 0 10px;
      background: #fff;
      color: #334d77;
      font-size: 0.82rem;
      font-weight: 620;
      cursor: pointer;
      transition: border-color 160ms ease, background-color 160ms ease, color 160ms ease;
    }

    .wd-live-outcome-btn:hover:not(:disabled) {
      border-color: #bfcbe2;
      background: #f8fafe;
    }

    .wd-live-outcome-btn.is-active {
      border-color: var(--gold);
      background: #fff5dc;
      color: #5f480f;
    }

    .wd-live-fields {
      border-top: 1px solid #e5ebf5;
      padding-top: 10px;
      display: grid;
      gap: 10px;
    }

    .wd-live-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px;
    }

    .wd-live-error {
      min-height: 18px;
      font-size: 0.82rem;
      color: #b43854;
      font-weight: 600;
    }

    .wd-live-actions {
      display: flex;
      align-items: center;
      justify-content: flex-end;
      gap: 10px;
      flex-wrap: wrap;
    }

    .wd-btn.wd-active {
      background: #efb122;
      border-color: #efb122;
      color: #2a1d00;
    }

    .wd-hidden {
      display: none !important;
    }

    .wd-side {
      display: grid;
      gap: 22px;
    }

    .wd-snapshot {
      padding: 24px;
      display: grid;
      gap: 18px;
    }

    .wd-section-title {
      margin: 0;
      font-size: 1.06rem;
      letter-spacing: -0.01em;
      font-weight: 700;
    }

    .wd-snapshot-name {
      margin: 0;
      font-size: 1.32rem;
      letter-spacing: -0.02em;
      font-weight: 720;
    }

    .wd-snapshot-line {
      color: var(--muted);
      font-size: 0.92rem;
    }

    .wd-context-list {
      display: grid;
      gap: 8px;
      padding: 14px;
      border-radius: 10px;
      border: 1px solid #e2e8f4;
      background: #fafcff;
    }

    .wd-context-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      color: #516487;
      font-size: 0.88rem;
    }

    .wd-context-row strong {
      color: #20385f;
      font-size: 0.86rem;
      text-transform: uppercase;
      letter-spacing: 0.04em;
    }

    .wd-high-mileage {
      width: fit-content;
      margin-top: 2px;
      border: 1px solid #f1dca4;
      background: #fff5dc;
      color: #6a5010;
      border-radius: 999px;
      padding: 6px 10px;
      font-size: 0.73rem;
      letter-spacing: 0.05em;
      text-transform: uppercase;
      font-weight: 720;
    }

    .wd-stats-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px;
    }

    .wd-stat-item {
      border: 1px solid #e3e9f4;
      background: #fff;
      border-radius: 10px;
      padding: 12px;
      display: grid;
      gap: 6px;
    }

    .wd-stat-item span {
      font-size: 0.75rem;
      color: #7485a3;
      text-transform: uppercase;
      letter-spacing: 0.07em;
      font-weight: 650;
    }

    .wd-stat-item strong {
      font-size: 1.22rem;
      color: var(--text);
      letter-spacing: -0.02em;
      font-weight: 740;
    }

    .wd-stat-item strong.wd-gold-number {
      color: var(--gold);
    }

    .wd-board {
      padding: 24px;
      display: grid;
      gap: 14px;
    }

    .wd-board-head {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      flex-wrap: wrap;
    }

    .wd-tab-group {
      display: inline-flex;
      border: 1px solid #dde5f2;
      border-radius: 10px;
      padding: 4px;
      gap: 4px;
      background: #f8fafe;
    }

    .wd-tab-btn {
      border: 0;
      border-radius: 8px;
      min-height: 32px;
      padding: 0 12px;
      font-size: 0.8rem;
      font-weight: 620;
      letter-spacing: 0.01em;
      color: #49618a;
      background: transparent;
      cursor: pointer;
      transition: background-color 160ms ease, color 160ms ease;
    }

    .wd-tab-btn.is-active {
      background: #ffffff;
      color: #1e335d;
      box-shadow: 0 4px 12px rgba(17, 34, 74, 0.08);
    }

    .wd-tab-btn:hover:not(.is-active) {
      background: #eef2fa;
    }

    .wd-board-sub {
      margin: 0;
      font-size: 0.86rem;
      color: #667895;
    }

    .wd-slot-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px;
    }

    .wd-board-slot {
      border: 1px solid #e2e8f3;
      border-radius: 8px;
      min-height: 40px;
      padding: 9px 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      font-size: 0.86rem;
      font-weight: 640;
      color: #4e6388;
      background: #edf2f8;
      transition: transform 160ms ease, background-color 160ms ease, border-color 160ms ease, color 160ms ease;
    }

    .wd-board-slot.is-booked {
      background: var(--gold);
      border-color: var(--gold);
      color: #342400;
    }

    .wd-board-slot.just-booked {
      animation: wd-slot-pop 360ms ease;
    }

    @keyframes wd-slot-pop {
      0% {
        transform: scale(0.92);
      }
      60% {
        transform: scale(1.04);
      }
      100% {
        transform: scale(1);
      }
    }

    .wd-modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(10, 17, 34, 0.45);
      opacity: 0;
      pointer-events: none;
      display: grid;
      place-items: center;
      padding: 20px;
      z-index: 120;
      transition: opacity 210ms ease;
    }

    .wd-modal-backdrop.open {
      opacity: 1;
      pointer-events: auto;
    }

    .wd-modal {
      width: min(100%, 720px);
      background: #fff;
      border: 1px solid #e2e8f3;
      border-radius: 14px;
      box-shadow: 0 28px 64px rgba(8, 18, 40, 0.2);
      padding: 24px;
      transform: translateY(14px);
      opacity: 0;
      transition: transform 210ms ease, opacity 210ms ease;
      max-height: min(88vh, 820px);
      overflow: auto;
    }

    .wd-modal-backdrop.open .wd-modal {
      transform: translateY(0);
      opacity: 1;
    }

    .wd-pause-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(10, 17, 34, 0.5);
      opacity: 0;
      pointer-events: none;
      display: grid;
      place-items: center;
      padding: 20px;
      z-index: 130;
      transition: opacity 220ms ease;
    }

    .wd-pause-backdrop.open {
      opacity: 1;
      pointer-events: auto;
    }

    .wd-pause-card {
      width: min(100%, 460px);
      background: #fff;
      border: 1px solid #e2e8f3;
      border-radius: 14px;
      box-shadow: 0 28px 64px rgba(8, 18, 40, 0.22);
      padding: 24px;
      transform: scale(0.98);
      opacity: 0;
      transition: transform 220ms ease, opacity 220ms ease;
      text-align: center;
    }

    .wd-pause-backdrop.open .wd-pause-card {
      transform: scale(1);
      opacity: 1;
    }

    .wd-pause-card h3 {
      margin: 0;
      font-size: 1.32rem;
      letter-spacing: -0.02em;
      font-weight: 720;
    }

    .wd-pause-card p {
      margin: 10px 0 0;
      color: #62728d;
      font-size: 0.95rem;
    }

    .wd-pause-actions {
      margin-top: 20px;
      display: flex;
      justify-content: center;
      gap: 10px;
      flex-wrap: wrap;
    }

    .wd-modal h2 {
      margin: 0;
      font-size: 1.34rem;
      letter-spacing: -0.02em;
      font-weight: 720;
    }

    .wd-modal p {
      margin: 8px 0 0;
      color: #61708d;
      font-size: 0.95rem;
    }

    .wd-outcomes {
      margin-top: 18px;
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px;
    }

    .wd-outcome-btn {
      border: 1px solid #dce4f2;
      border-radius: 10px;
      min-height: 40px;
      background: #fff;
      color: #334d77;
      font-size: 0.9rem;
      font-weight: 610;
      cursor: pointer;
      transition: border-color 160ms ease, background-color 160ms ease, color 160ms ease;
    }

    .wd-outcome-btn:hover {
      border-color: #bfcbe2;
      background: #f8fafe;
    }

    .wd-outcome-btn.is-active {
      border-color: var(--gold);
      background: #fff5dc;
      color: #5f480f;
    }

    .wd-appointment-fields {
      margin-top: 18px;
      border: 1px solid #e4eaf4;
      border-radius: 10px;
      padding: 16px;
      background: #fcfdff;
      display: grid;
      gap: 14px;
    }

    .wd-label {
      display: block;
      font-size: 0.76rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #7485a3;
      font-weight: 660;
      margin-bottom: 6px;
    }

    .wd-field,
    .wd-field-select {
      width: 100%;
      border: 1px solid #d7dfed;
      border-radius: 10px;
      min-height: 40px;
      padding: 0 10px;
      font-size: 0.94rem;
      color: #20365e;
      background: #fff;
      outline: none;
      transition: border-color 180ms ease, box-shadow 180ms ease;
    }

    .wd-field-textarea {
      min-height: 96px;
      padding: 10px;
      resize: vertical;
      font-family: inherit;
      line-height: 1.4;
    }

    .wd-helper-text {
      margin: 0;
      color: #5a6f94;
      font-size: 0.86rem;
    }

    .wd-field:focus,
    .wd-field-select:focus {
      border-color: #bccae3;
      box-shadow: 0 0 0 3px rgba(89, 113, 158, 0.12);
    }

    .wd-form-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px;
    }

    .wd-modal-slot-list {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 8px;
    }

    .wd-slot-choice {
      border: 1px solid #dbe3f1;
      border-radius: 8px;
      min-height: 36px;
      padding: 6px 8px;
      font-size: 0.84rem;
      font-weight: 620;
      color: #3f557d;
      background: #eef3f9;
      cursor: pointer;
      transition: transform 140ms ease, border-color 140ms ease, background-color 140ms ease;
    }

    .wd-slot-choice:hover:not(:disabled) {
      transform: translateY(-1px);
      border-color: #c8d2e3;
      background: #e8eef7;
    }

    .wd-slot-choice.is-selected {
      border-color: var(--gold);
      background: #fff3d3;
      color: #5f490f;
    }

    .wd-slot-choice:disabled {
      background: #f3f5f9;
      color: #98a5bc;
      border-color: #e5e9f1;
      cursor: not-allowed;
    }

    .wd-slot-empty {
      grid-column: 1 / -1;
      font-size: 0.85rem;
      color: #6c7f9e;
      padding: 6px 0;
    }

    .wd-modal-error {
      margin-top: 10px;
      min-height: 20px;
      font-size: 0.86rem;
      color: #b43854;
      font-weight: 600;
    }

    .wd-modal-actions {
      margin-top: 4px;
      display: flex;
      justify-content: flex-end;
      gap: 10px;
      flex-wrap: wrap;
    }

    @media (max-width: 1180px) {
      .wd-layout {
        grid-template-columns: 1fr;
      }

      .wd-goal-stack {
        min-width: min(100%, 340px);
      }

      .wd-session-stats {
        max-width: none;
      }

      .wd-customer-meta-grid {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }

    @media (max-width: 860px) {
      .wd-shell {
        width: min(100% - 28px, var(--max));
      }

      .wd-nav-inner {
        align-items: flex-start;
      }

      .wd-nav-actions {
        justify-content: flex-start;
      }

      .wd-select {
        min-width: 0;
        width: 100%;
      }

      .wd-main {
        padding-top: 124px;
      }

      .wd-engine {
        padding: 22px;
      }

      .wd-session-stats {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }

      .wd-customer-meta-grid,
      .wd-form-grid,
      .wd-live-grid {
        grid-template-columns: 1fr;
      }

      .wd-outcomes {
        grid-template-columns: 1fr;
      }

      .wd-modal-slot-list {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }

    @media (max-height: 900px) and (min-width: 861px) {
      .wd-main {
        padding-top: 86px;
      }

      .wd-engine {
        padding: 20px;
        gap: 12px;
      }

      .wd-engine-top {
        padding-bottom: 12px;
      }

      .wd-goal-item {
        padding: 8px;
      }

      .wd-customer-name {
        font-size: clamp(1.52rem, 2.4vw, 2.1rem);
      }

      .wd-meta-item {
        padding: 8px;
      }

      .wd-action-row {
        padding-top: 12px;
      }

      .wd-btn {
        min-height: 38px;
        font-size: 0.88rem;
      }
    }

    @media (max-width: 560px) {
      .wd-goals {
        grid-template-columns: 1fr;
      }

      .wd-session-stats {
        grid-template-columns: 1fr;
      }

      .wd-action-row .wd-btn {
        width: 100%;
      }

      .wd-slot-grid,
      .wd-stats-grid {
        grid-template-columns: 1fr;
      }
    }

    @media (prefers-reduced-motion: reduce) {
      *,
      *::before,
      *::after {
        animation: none !important;
        transition: none !important;
      }
    }
  </style>
</head>
<body>
  <header class="wd-nav">
    <div class="wd-shell wd-nav-inner">
      <a class="wd-brand" href="#">WynnDialer</a>
      <div class="wd-nav-actions">
        <select id="campaignSelect" class="wd-select" aria-label="Campaign">
          <option value="VIP Upgrade Event">VIP Upgrade Event</option>
          <option value="Lease Maturity Push">Lease Maturity Push</option>
          <option value="Service Equity Push">Service Equity Push</option>
        </select>
        <div class="wd-rep">Rep: <strong id="repName">Harper Mason</strong></div>
        <button id="endSessionLink" class="wd-end-link" type="button">End Session</button>
      </div>
    </div>
  </header>

  <main class="wd-main">
    <div class="wd-shell wd-layout">
      <section class="wd-card wd-engine" aria-label="Call Engine Panel">
        <div class="wd-engine-top">
          <div>
            <div class="wd-overline">Campaign Name</div>
            <h1 id="activeCampaignName">VIP Upgrade Event</h1>
          </div>
          <div class="wd-goal-stack">
            <div class="wd-goals">
              <div class="wd-goal-item">
                <span>Goal Today</span>
                <strong>6</strong>
              </div>
              <div class="wd-goal-item">
                <span>Booked Today</span>
                <strong id="bookedToday" class="wd-gold-number">0</strong>
              </div>
            </div>
          </div>
        </div>

        <div class="wd-status-row">
          <div id="statusPill" class="wd-status-pill" data-state="ready">Ready</div>
          <div id="callTimer" class="wd-timer">00:00</div>
        </div>
        <div id="pauseIndicator" class="wd-pause-indicator">Will pause after current call</div>
        <div id="voicemailInline" class="wd-voicemail-inline" aria-live="polite">
          <div id="voicemailInlineText" class="wd-voicemail-text">Leaving Voicemail...</div>
          <div id="voicemailInlineProgress" class="wd-voicemail-progress">
            <div id="voicemailInlineFill" class="wd-voicemail-progress-fill"></div>
          </div>
        </div>

        <div id="customerPanel" class="wd-customer-panel">
          <div class="wd-customer-name-row">
            <h2 id="customerName" class="wd-customer-name"></h2>
            <span id="vmSentTag" class="wd-vm-sent-tag">VM Sent</span>
          </div>
          <div class="wd-customer-meta-grid">
            <div class="wd-meta-item">
              <span>Phone</span>
              <strong id="customerPhone"></strong>
            </div>
            <div class="wd-meta-item">
              <span>Vehicle</span>
              <strong id="customerVehicle"></strong>
            </div>
            <div class="wd-meta-item">
              <span>Last Purchase</span>
              <strong id="customerPurchase"></strong>
            </div>
            <div class="wd-meta-item">
              <span>Equity Status</span>
              <strong><span id="equityBadge" class="wd-badge"></span></strong>
            </div>
            <label class="wd-meta-item wd-mileage-item">
              <span>Mileage</span>
              <input id="mileageInput" type="number" min="0" step="1">
            </label>
          </div>
        </div>

        <div class="wd-action-row">
          <button id="startBlockBtn" class="wd-btn wd-btn-primary" type="button">Start Booking Block</button>
          <button id="endBlockBtn" class="wd-btn wd-btn-danger" type="button">End Booking Block</button>
          <button id="pauseAfterBtn" class="wd-btn wd-btn-neutral" type="button">Pause After This Call</button>
        </div>
        <div class="wd-voicemail-row">
          <button id="voicemailBeepBtn" class="wd-btn wd-btn-outline wd-hidden" type="button">Voicemail Beep Heard</button>
          <button id="dropVoicemailBtn" class="wd-btn wd-btn-primary wd-hidden" type="button">Drop Voicemail &amp; Continue</button>
        </div>

        <div id="liveResolutionPanel" class="wd-live-resolution wd-hidden">
          <div class="wd-live-head">
            <span>In-Call Resolution</span>
            <strong id="liveResolutionSummary">No resolution started</strong>
          </div>

          <div id="liveOutcomeButtons" class="wd-live-outcomes">
            <button type="button" class="wd-live-outcome-btn" data-live-outcome="Appointment Booked">Appointment Booked</button>
            <button type="button" class="wd-live-outcome-btn" data-live-outcome="Call Back Later">Call Back Later</button>
            <button type="button" class="wd-live-outcome-btn" data-live-outcome="Wants Info">Wants Info</button>
            <button type="button" class="wd-live-outcome-btn" data-live-outcome="Not Interested">Not Interested</button>
          </div>

          <div id="liveAppointmentFields" class="wd-live-fields wd-hidden">
            <div class="wd-live-grid">
              <div>
                <label class="wd-label" for="liveDaySelect">Date</label>
                <select id="liveDaySelect" class="wd-field-select">
                  <option value="Friday">Friday</option>
                  <option value="Saturday">Saturday</option>
                </select>
              </div>
              <div>
                <label class="wd-label" for="liveSlotSelect">Time Slot</label>
                <select id="liveSlotSelect" class="wd-field-select"></select>
              </div>
            </div>
            <div class="wd-live-grid">
              <div>
                <label class="wd-label" for="liveVehicleInput">Confirm Vehicle</label>
                <input id="liveVehicleInput" class="wd-field" type="text">
              </div>
              <div>
                <label class="wd-label" for="liveMileageInput">Confirm Mileage</label>
                <input id="liveMileageInput" class="wd-field" type="number" min="0" step="1">
              </div>
            </div>
          </div>

          <div id="liveWantsInfoFields" class="wd-live-fields wd-hidden">
            <div>
              <label class="wd-label" for="liveInfoNeededInput">What Info Is Needed?</label>
              <textarea id="liveInfoNeededInput" class="wd-field wd-field-textarea" placeholder="What does the customer need from us?"></textarea>
            </div>
            <div>
              <label class="wd-label" for="liveInfoWhyInput">Why Is It Needed?</label>
              <textarea id="liveInfoWhyInput" class="wd-field wd-field-textarea" placeholder="Why this matters for the customer's decision"></textarea>
            </div>
          </div>

          <div id="liveResolutionError" class="wd-live-error"></div>

          <div class="wd-live-actions">
            <button id="clearLiveResolutionBtn" type="button" class="wd-btn wd-btn-ghost">Clear</button>
            <button id="lockLiveResolutionBtn" type="button" class="wd-btn wd-btn-outline">Lock Resolution</button>
          </div>
        </div>

        <div class="wd-support-stack">
          <div class="wd-customer-note">
            <span>Rep Context</span>
            <p id="customerInsight">No info requests logged for this customer yet.</p>
          </div>
          <div class="wd-session-bar">
            <div class="wd-session-mode">
              <span id="powerModeDot" class="wd-mode-dot" aria-hidden="true"></span>
              <span id="powerModeLabel">Power Mode Inactive</span>
            </div>
            <div class="wd-session-stats">
              <div class="wd-session-item">
                <span>Session Timer</span>
                <strong id="sessionTimerStat" class="wd-metric-value">00:00</strong>
              </div>
              <div class="wd-session-item">
                <span>Calls Made</span>
                <strong id="callsMadePower" class="wd-metric-value">0</strong>
              </div>
              <div class="wd-session-item">
                <span>Voicemails Left</span>
                <strong id="voicemailsLeftPower" class="wd-metric-value wd-gold-number">0</strong>
              </div>
              <div class="wd-session-item">
                <span>Calls Left</span>
                <strong id="callsLeftPower" class="wd-metric-value">20</strong>
              </div>
              <div class="wd-session-item">
                <span>Bookings</span>
                <strong id="bookingsPower" class="wd-metric-value wd-gold-number">0</strong>
              </div>
              <div class="wd-session-item">
                <span>Booking Rate</span>
                <strong id="bookingRatePower" class="wd-metric-value">0.0%</strong>
              </div>
            </div>
          </div>

          <div class="wd-campaign-track">
            <div class="wd-campaign-track-head">
              <span>Campaign Progress</span>
              <strong id="campaignProgressText">0/20 Finalized</strong>
            </div>
            <div class="wd-progress-shell">
              <div id="campaignProgressFill" class="wd-progress-fill"></div>
            </div>
            <div class="wd-campaign-track-foot">
              <span>Voicemails Left: <strong id="voicemailsLeftInline">0</strong></span>
              <span>Callbacks Scheduled: <strong id="callbacksScheduledInline">0</strong></span>
            </div>
          </div>
        </div>
      </section>

      <aside class="wd-side">
        <section class="wd-card wd-snapshot" aria-label="Customer Snapshot">
          <h3 class="wd-section-title">Customer Snapshot</h3>
          <div id="snapshotIdentity" class="wd-snapshot-identity">
            <h4 id="snapshotName" class="wd-snapshot-name"></h4>
            <div id="snapshotVehicle" class="wd-snapshot-line"></div>
            <div id="snapshotPurchase" class="wd-snapshot-line"></div>
            <div id="snapshotMileage" class="wd-snapshot-line"></div>
            <div id="highMileageBadge" class="wd-high-mileage wd-hidden">High Mileage</div>
          </div>

          <div class="wd-context-list">
            <div class="wd-context-row">
              <span>Campaign</span>
              <strong id="snapshotCampaignName">VIP Upgrade Event</strong>
            </div>
            <div class="wd-context-row">
              <span>SMS Sent</span>
              <strong>Yes</strong>
            </div>
            <div class="wd-context-row">
              <span>RVM Sent</span>
              <strong>Yes</strong>
            </div>
            <div class="wd-context-row">
              <span>Responded</span>
              <strong>No</strong>
            </div>
          </div>

          <div class="wd-stats-grid">
            <div class="wd-stat-item">
              <span>Calls Made</span>
              <strong id="callsMadeStat">0</strong>
            </div>
            <div class="wd-stat-item">
              <span>Connections</span>
              <strong id="connectionsStat">0</strong>
            </div>
            <div class="wd-stat-item">
              <span>Bookings</span>
              <strong id="bookingsStat" class="wd-gold-number">0</strong>
            </div>
            <div class="wd-stat-item">
              <span>Booking Rate</span>
              <strong id="bookingRateStat">0.0%</strong>
            </div>
          </div>
        </section>

        <section class="wd-card wd-board" aria-label="Booking Board">
          <div class="wd-board-head">
            <h3 class="wd-section-title">Booking Board</h3>
            <div class="wd-tab-group" role="tablist" aria-label="Board days">
              <button type="button" class="wd-tab-btn is-active" data-day="Friday">Friday</button>
              <button type="button" class="wd-tab-btn" data-day="Saturday">Saturday</button>
            </div>
          </div>
          <p id="boardHours" class="wd-board-sub">Friday (9AM-9PM)</p>
          <div id="boardSlots" class="wd-slot-grid"></div>
        </section>
      </aside>
    </div>
  </main>

  <div id="modalBackdrop" class="wd-modal-backdrop" aria-hidden="true">
    <div class="wd-modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <h2 id="modalTitle">Select Call Disposition</h2>
      <p>Choose a primary outcome before continuing.</p>

      <div class="wd-outcomes" id="outcomeGrid">
        <button type="button" class="wd-outcome-btn" data-outcome="Appointment Booked">Appointment Booked</button>
        <button type="button" class="wd-outcome-btn" data-outcome="Call Back Later">Call Back Later</button>
        <button type="button" class="wd-outcome-btn" data-outcome="Wants Info">Wants Info</button>
        <button type="button" class="wd-outcome-btn" data-outcome="Not Interested">Not Interested</button>
        <button type="button" class="wd-outcome-btn" data-outcome="DNC">DNC</button>
        <button type="button" class="wd-outcome-btn" data-outcome="Wrong Number">Wrong Number</button>
        <button type="button" class="wd-outcome-btn" data-outcome="Vehicle Sold">Vehicle Sold</button>
      </div>

      <div id="appointmentFields" class="wd-appointment-fields wd-hidden">
        <div>
          <label class="wd-label" for="appointmentDaySelect">Date Picker (Mock)</label>
          <select id="appointmentDaySelect" class="wd-field-select">
            <option value="Friday">Friday</option>
            <option value="Saturday">Saturday</option>
          </select>
        </div>

        <div>
          <div class="wd-label">Time Slot Selector</div>
          <div id="modalSlotList" class="wd-modal-slot-list"></div>
        </div>

        <div class="wd-form-grid">
          <div>
            <label class="wd-label" for="confirmVehicleInput">Confirm Vehicle</label>
            <input id="confirmVehicleInput" class="wd-field" type="text">
          </div>
          <div>
            <label class="wd-label" for="confirmMileageInput">Confirm Mileage</label>
            <input id="confirmMileageInput" class="wd-field" type="number" min="0" step="1">
          </div>
        </div>
      </div>

      <div id="wantsInfoFields" class="wd-appointment-fields wd-hidden">
        <p class="wd-helper-text">Capture what information they asked for and why it matters before continuing.</p>
        <div>
          <label class="wd-label" for="infoNeededInput">What Info Is Needed?</label>
          <textarea id="infoNeededInput" class="wd-field wd-field-textarea" placeholder="Example: trade value breakdown, payment options, warranty details"></textarea>
        </div>
        <div>
          <label class="wd-label" for="infoWhyInput">Why Do They Need It?</label>
          <textarea id="infoWhyInput" class="wd-field wd-field-textarea" placeholder="Example: evaluating if upgrade payment stays under $550 with current mileage"></textarea>
        </div>
      </div>

      <div id="modalError" class="wd-modal-error"></div>

      <div class="wd-modal-actions">
        <button id="completeDispositionBtn" type="button" class="wd-btn wd-btn-primary">Complete Disposition</button>
      </div>
    </div>
  </div>

  <div id="pauseBackdrop" class="wd-pause-backdrop" aria-hidden="true">
    <div class="wd-pause-card" role="dialog" aria-modal="true" aria-labelledby="pauseTitle">
      <h3 id="pauseTitle">Power Mode Paused</h3>
      <p>Resume when ready.</p>
      <div class="wd-pause-actions">
        <button id="resumeBlockBtn" type="button" class="wd-btn wd-btn-primary">Resume Booking Block</button>
        <button id="pauseEndSessionBtn" type="button" class="wd-btn wd-btn-outline">End Session</button>
      </div>
    </div>
  </div>

  <script>
    (function () {
      var GOAL_TODAY = 6;
      var CONNECT_PROBABILITY = 0.6;
      var CONNECT_TO_YOU_DELAY_MS = 1000;
      var DIAL_TO_CONNECT_DELAY_MS = 1500;
      var SLOT_TEMPLATE = {
        Friday: ["9:00", "10:30", "12:00", "1:30", "3:00", "4:30", "6:00", "7:30"],
        Saturday: ["9:00", "10:30", "12:00", "1:30", "3:00", "4:30"]
      };

      var BOARD_HOURS = {
        Friday: "Friday (9AM-9PM)",
        Saturday: "Saturday (9AM-6PM)"
      };

      function createEmptyLiveResolution(day) {
        return {
          outcome: "",
          day: day || "Friday",
          slot: "",
          vehicle: "",
          mileage: "",
          infoNeeded: "",
          infoWhy: "",
          locked: false,
          summary: ""
        };
      }

      let powerModeActive = false;
      let pauseAfterCall = false;
      let currentCallActive = false;
      let callTimer = 0;
      let sessionStartTime = null;

      var customers = [
        { name: "Olivia Jensen", phone: "(214) 555-1084", vehicle: "2020 Hyundai Sonata", purchaseDate: "Mar 2020", mileage: 112430, equity: true },
        { name: "Marcus Keller", phone: "(469) 555-9182", vehicle: "2019 Hyundai Santa Fe", purchaseDate: "Nov 2019", mileage: 128900, equity: true },
        { name: "Avery Collins", phone: "(972) 555-4219", vehicle: "2021 Hyundai Palisade", purchaseDate: "Jul 2021", mileage: 76410, equity: false },
        { name: "Brianna Lopez", phone: "(817) 555-3477", vehicle: "2018 Hyundai Elantra", purchaseDate: "May 2018", mileage: 139820, equity: true },
        { name: "Dylan Reed", phone: "(903) 555-6745", vehicle: "2022 Hyundai Tucson", purchaseDate: "Jan 2022", mileage: 51320, equity: false },
        { name: "Savannah Price", phone: "(945) 555-7741", vehicle: "2017 Hyundai Accent", purchaseDate: "Aug 2017", mileage: 151560, equity: false },
        { name: "Jared Holmes", phone: "(682) 555-2208", vehicle: "2020 Hyundai Kona", purchaseDate: "Dec 2020", mileage: 98770, equity: true },
        { name: "Kira Watson", phone: "(254) 555-9926", vehicle: "2019 Hyundai Venue", purchaseDate: "Oct 2019", mileage: 120340, equity: false },
        { name: "Noah Bennett", phone: "(430) 555-1167", vehicle: "2018 Hyundai Tucson", purchaseDate: "Jun 2018", mileage: 134210, equity: true },
        { name: "Madison Cooper", phone: "(325) 555-7784", vehicle: "2021 Hyundai Sonata", purchaseDate: "Sep 2021", mileage: 63895, equity: false },
        { name: "Parker Diaz", phone: "(830) 555-0301", vehicle: "2016 Hyundai Santa Fe", purchaseDate: "Feb 2017", mileage: 164480, equity: true },
        { name: "Harley Monroe", phone: "(713) 555-6830", vehicle: "2022 Hyundai Elantra", purchaseDate: "Apr 2022", mileage: 44520, equity: false },
        { name: "Tanner Brooks", phone: "(281) 555-3127", vehicle: "2019 Hyundai Palisade", purchaseDate: "Jan 2020", mileage: 106760, equity: true },
        { name: "Evelyn Shaw", phone: "(346) 555-7821", vehicle: "2017 Hyundai Sonata", purchaseDate: "Jul 2017", mileage: 143980, equity: false },
        { name: "Grant Fisher", phone: "(512) 555-9408", vehicle: "2020 Hyundai Santa Cruz", purchaseDate: "Aug 2020", mileage: 88410, equity: true },
        { name: "Mia Rios", phone: "(210) 555-6612", vehicle: "2018 Hyundai Santa Fe", purchaseDate: "Jan 2019", mileage: 126740, equity: true },
        { name: "Logan Pierce", phone: "(936) 555-2487", vehicle: "2021 Hyundai Tucson", purchaseDate: "Dec 2021", mileage: 58420, equity: false },
        { name: "Natalie Quinn", phone: "(915) 555-8143", vehicle: "2019 Hyundai Sonata", purchaseDate: "Jun 2019", mileage: 117900, equity: true },
        { name: "Cole Ramsey", phone: "(361) 555-3294", vehicle: "2017 Hyundai Elantra", purchaseDate: "Apr 2018", mileage: 146210, equity: false },
        { name: "Riley Vaughn", phone: "(737) 555-7018", vehicle: "2020 Hyundai Palisade", purchaseDate: "Oct 2020", mileage: 91560, equity: true }
      ];

      var runtime = {
        campaign: "VIP Upgrade Event",
        currentIndex: 0,
        nextIndex: 0,
        queueComplete: false,
        flowTimers: [],
        callTickInterval: null,
        callDurationTimeout: null,
        sessionTickInterval: null,
        activeBoardDay: "Friday",
        bookedSlots: {
          Friday: new Set(),
          Saturday: new Set()
        },
        stats: {
          callsMade: 0,
          connections: 0,
          bookings: 0,
          voicemailsLeft: 0,
          callbacksScheduled: 0,
          finalized: 0
        },
        modalOpen: false,
        pauseLightboxOpen: false,
        voicemailPrompted: false,
        voicemailDropping: false,
        dispositionState: "",
        selectedOutcome: "",
        selectedDay: "Friday",
        selectedSlot: "",
        justBookedKey: "",
        liveResolution: createEmptyLiveResolution("Friday")
      };

      var els = {
        campaignSelect: document.getElementById("campaignSelect"),
        activeCampaignName: document.getElementById("activeCampaignName"),
        snapshotCampaignName: document.getElementById("snapshotCampaignName"),
        startBlockBtn: document.getElementById("startBlockBtn"),
        endBlockBtn: document.getElementById("endBlockBtn"),
        pauseAfterBtn: document.getElementById("pauseAfterBtn"),
        endSessionLink: document.getElementById("endSessionLink"),
        powerModeDot: document.getElementById("powerModeDot"),
        powerModeLabel: document.getElementById("powerModeLabel"),
        sessionTimerStat: document.getElementById("sessionTimerStat"),
        callsMadePower: document.getElementById("callsMadePower"),
        voicemailsLeftPower: document.getElementById("voicemailsLeftPower"),
        callsLeftPower: document.getElementById("callsLeftPower"),
        bookingsPower: document.getElementById("bookingsPower"),
        bookingRatePower: document.getElementById("bookingRatePower"),
        campaignProgressText: document.getElementById("campaignProgressText"),
        campaignProgressFill: document.getElementById("campaignProgressFill"),
        voicemailsLeftInline: document.getElementById("voicemailsLeftInline"),
        callbacksScheduledInline: document.getElementById("callbacksScheduledInline"),
        statusPill: document.getElementById("statusPill"),
        callTimer: document.getElementById("callTimer"),
        pauseIndicator: document.getElementById("pauseIndicator"),
        voicemailInline: document.getElementById("voicemailInline"),
        voicemailInlineText: document.getElementById("voicemailInlineText"),
        voicemailInlineProgress: document.getElementById("voicemailInlineProgress"),
        voicemailInlineFill: document.getElementById("voicemailInlineFill"),
        vmSentTag: document.getElementById("vmSentTag"),
        bookedToday: document.getElementById("bookedToday"),
        voicemailBeepBtn: document.getElementById("voicemailBeepBtn"),
        dropVoicemailBtn: document.getElementById("dropVoicemailBtn"),
        liveResolutionPanel: document.getElementById("liveResolutionPanel"),
        liveResolutionSummary: document.getElementById("liveResolutionSummary"),
        liveOutcomeButtons: document.getElementById("liveOutcomeButtons"),
        liveAppointmentFields: document.getElementById("liveAppointmentFields"),
        liveWantsInfoFields: document.getElementById("liveWantsInfoFields"),
        liveDaySelect: document.getElementById("liveDaySelect"),
        liveSlotSelect: document.getElementById("liveSlotSelect"),
        liveVehicleInput: document.getElementById("liveVehicleInput"),
        liveMileageInput: document.getElementById("liveMileageInput"),
        liveInfoNeededInput: document.getElementById("liveInfoNeededInput"),
        liveInfoWhyInput: document.getElementById("liveInfoWhyInput"),
        liveResolutionError: document.getElementById("liveResolutionError"),
        clearLiveResolutionBtn: document.getElementById("clearLiveResolutionBtn"),
        lockLiveResolutionBtn: document.getElementById("lockLiveResolutionBtn"),
        customerPanel: document.getElementById("customerPanel"),
        customerName: document.getElementById("customerName"),
        customerPhone: document.getElementById("customerPhone"),
        customerVehicle: document.getElementById("customerVehicle"),
        customerPurchase: document.getElementById("customerPurchase"),
        customerInsight: document.getElementById("customerInsight"),
        equityBadge: document.getElementById("equityBadge"),
        mileageInput: document.getElementById("mileageInput"),
        snapshotIdentity: document.getElementById("snapshotIdentity"),
        snapshotName: document.getElementById("snapshotName"),
        snapshotVehicle: document.getElementById("snapshotVehicle"),
        snapshotPurchase: document.getElementById("snapshotPurchase"),
        snapshotMileage: document.getElementById("snapshotMileage"),
        highMileageBadge: document.getElementById("highMileageBadge"),
        callsMadeStat: document.getElementById("callsMadeStat"),
        connectionsStat: document.getElementById("connectionsStat"),
        bookingsStat: document.getElementById("bookingsStat"),
        bookingRateStat: document.getElementById("bookingRateStat"),
        boardHours: document.getElementById("boardHours"),
        boardSlots: document.getElementById("boardSlots"),
        boardTabs: document.querySelectorAll(".wd-tab-btn"),
        modalBackdrop: document.getElementById("modalBackdrop"),
        outcomeGrid: document.getElementById("outcomeGrid"),
        appointmentFields: document.getElementById("appointmentFields"),
        wantsInfoFields: document.getElementById("wantsInfoFields"),
        appointmentDaySelect: document.getElementById("appointmentDaySelect"),
        modalSlotList: document.getElementById("modalSlotList"),
        confirmVehicleInput: document.getElementById("confirmVehicleInput"),
        confirmMileageInput: document.getElementById("confirmMileageInput"),
        infoNeededInput: document.getElementById("infoNeededInput"),
        infoWhyInput: document.getElementById("infoWhyInput"),
        modalError: document.getElementById("modalError"),
        completeDispositionBtn: document.getElementById("completeDispositionBtn"),
        pauseBackdrop: document.getElementById("pauseBackdrop"),
        resumeBlockBtn: document.getElementById("resumeBlockBtn"),
        pauseEndSessionBtn: document.getElementById("pauseEndSessionBtn")
      };

      var metricAnimationTimers = new WeakMap();

      function normalizeStateText(value) {
        return value.toLowerCase().replace(/[^a-z]+/g, "-").replace(/(^-|-$)/g, "");
      }

      function formatTimer(seconds) {
        var mins = Math.floor(seconds / 60);
        var secs = seconds % 60;
        var mm = mins < 10 ? "0" + mins : String(mins);
        var ss = secs < 10 ? "0" + secs : String(secs);
        return mm + ":" + ss;
      }

      function getCurrentCustomer() {
        return customers[runtime.currentIndex] || null;
      }

      function setStatus(statusText) {
        els.statusPill.textContent = statusText;
        els.statusPill.dataset.state = normalizeStateText(statusText);
      }

      function syncBodyLock() {
        var shouldLock = runtime.modalOpen || runtime.pauseLightboxOpen;
        document.body.classList.toggle("wd-lock", shouldLock);
      }

      function animateMetricValue(el, value) {
        var textValue = String(value);
        if (el.textContent === textValue) {
          return;
        }

        if (metricAnimationTimers.has(el)) {
          clearTimeout(metricAnimationTimers.get(el));
        }

        el.classList.add("is-updating");
        el.textContent = textValue;
        metricAnimationTimers.set(el, setTimeout(function () {
          el.classList.remove("is-updating");
          metricAnimationTimers.delete(el);
        }, 180));
      }

      function updateCallTimerDisplay() {
        els.callTimer.textContent = formatTimer(callTimer);
      }

      function startCallTimerTick() {
        stopCallTimerTick();
        callTimer = 0;
        updateCallTimerDisplay();
        runtime.callTickInterval = setInterval(function () {
          callTimer += 1;
          updateCallTimerDisplay();
        }, 1000);
      }

      function stopCallTimerTick() {
        if (runtime.callTickInterval) {
          clearInterval(runtime.callTickInterval);
          runtime.callTickInterval = null;
        }
      }

      function clearCallDurationTimeout() {
        if (runtime.callDurationTimeout) {
          clearTimeout(runtime.callDurationTimeout);
          runtime.callDurationTimeout = null;
        }
      }

      function clearFlowTimers() {
        runtime.flowTimers.forEach(function (timerId) {
          clearTimeout(timerId);
        });
        runtime.flowTimers = [];
        clearCallDurationTimeout();
      }

      function triggerGoldPulse() {
        els.statusPill.classList.remove("is-pulsing");
        void els.statusPill.offsetWidth;
        els.statusPill.classList.add("is-pulsing");
      }

      function updatePauseIndicator() {
        var show = pauseAfterCall && currentCallActive;
        els.pauseIndicator.classList.toggle("show", show);
      }

      function hideVoicemailInline() {
        els.voicemailInline.classList.remove("show");
        els.voicemailInlineText.classList.remove("delivered");
        els.voicemailInlineText.textContent = "Leaving Voicemail...";
        els.voicemailInlineProgress.classList.remove("show");
        els.voicemailInlineFill.style.width = "0%";
      }

      function showVoicemailLeavingUi() {
        els.voicemailInline.classList.add("show");
        els.voicemailInlineText.classList.remove("delivered");
        els.voicemailInlineText.textContent = "Leaving Voicemail...";
        els.voicemailInlineProgress.classList.add("show");
        els.voicemailInlineFill.style.width = "0%";
        requestAnimationFrame(function () {
          els.voicemailInlineFill.style.width = "100%";
        });
      }

      function showVoicemailDeliveredUi() {
        els.voicemailInline.classList.add("show");
        els.voicemailInlineText.classList.add("delivered");
        els.voicemailInlineText.textContent = " Voicemail Delivered";
        els.voicemailInlineProgress.classList.remove("show");
      }

      function flashVmSentTag() {
        els.vmSentTag.classList.add("show");
        setTimeout(function () {
          els.vmSentTag.classList.remove("show");
        }, 800);
      }

      function resetVoicemailState() {
        runtime.voicemailPrompted = false;
        runtime.voicemailDropping = false;
        runtime.dispositionState = "";
        hideVoicemailInline();
      }

      function setLiveResolutionError(message) {
        els.liveResolutionError.textContent = message || "";
      }

      function clearLiveResolutionError() {
        els.liveResolutionError.textContent = "";
      }

      function resetLiveResolutionState() {
        runtime.liveResolution = createEmptyLiveResolution(runtime.activeBoardDay || "Friday");
        clearLiveResolutionError();
      }

      function getLiveResolutionSummaryText() {
        var live = runtime.liveResolution;
        if (!live.outcome) {
          return "No resolution started";
        }
        if (!live.locked) {
          return live.outcome + " in progress";
        }
        return live.summary || (live.outcome + " locked");
      }

      function renderLiveResolutionSlots() {
        var live = runtime.liveResolution;
        var day = live.day || "Friday";
        var slots = SLOT_TEMPLATE[day] || [];
        var html = '<option value="">Select slot</option>';
        var selectedValid = false;

        slots.forEach(function (slot) {
          var booked = runtime.bookedSlots[day].has(slot);
          var selected = live.slot === slot && !booked;
          if (selected) {
            selectedValid = true;
          }
          html += '<option value="' + slot + '"' +
            (selected ? " selected" : "") +
            (booked ? " disabled" : "") +
            ">" + slot + (booked ? " (Booked)" : "") + "</option>";
        });

        els.liveSlotSelect.innerHTML = html;

        if (!selectedValid) {
          runtime.liveResolution.slot = "";
          els.liveSlotSelect.value = "";
        }
      }

      function renderLiveResolutionPanel() {
        var connectedState = currentCallActive && !runtime.modalOpen && !runtime.pauseLightboxOpen && !runtime.voicemailDropping;
        var live = runtime.liveResolution;
        var showAppointment = live.outcome === "Appointment Booked";
        var showWantsInfo = live.outcome === "Wants Info";

        els.liveResolutionPanel.classList.toggle("wd-hidden", !connectedState);
        if (!connectedState) {
          return;
        }

        els.liveResolutionSummary.textContent = getLiveResolutionSummaryText();
        els.liveResolutionSummary.classList.toggle("is-locked", live.locked);

        var liveButtons = els.liveOutcomeButtons.querySelectorAll(".wd-live-outcome-btn");
        liveButtons.forEach(function (btn) {
          var isActive = btn.dataset.liveOutcome === live.outcome;
          btn.classList.toggle("is-active", isActive);
          btn.disabled = live.locked;
        });

        els.liveAppointmentFields.classList.toggle("wd-hidden", !showAppointment);
        els.liveWantsInfoFields.classList.toggle("wd-hidden", !showWantsInfo);

        els.liveDaySelect.disabled = live.locked;
        els.liveSlotSelect.disabled = live.locked;
        els.liveVehicleInput.disabled = live.locked;
        els.liveMileageInput.disabled = live.locked;
        els.liveInfoNeededInput.disabled = live.locked;
        els.liveInfoWhyInput.disabled = live.locked;

        els.liveDaySelect.value = live.day || "Friday";
        els.liveVehicleInput.value = live.vehicle || "";
        els.liveMileageInput.value = live.mileage || "";
        els.liveInfoNeededInput.value = live.infoNeeded || "";
        els.liveInfoWhyInput.value = live.infoWhy || "";

        if (showAppointment) {
          renderLiveResolutionSlots();
          els.liveSlotSelect.value = live.slot || "";
        } else {
          els.liveSlotSelect.innerHTML = "";
        }

        els.lockLiveResolutionBtn.disabled = !live.outcome || live.locked;
        els.lockLiveResolutionBtn.textContent = live.locked ? "Resolution Locked" : "Lock Resolution";
        els.clearLiveResolutionBtn.disabled = !live.outcome && !live.locked;
      }

      function setLiveOutcome(outcome) {
        if (!currentCallActive || runtime.voicemailDropping) {
          return;
        }

        var live = runtime.liveResolution;
        var customer = getCurrentCustomer();
        live.outcome = outcome;
        live.locked = false;
        live.summary = "";

        if (outcome === "Appointment Booked" && customer) {
          if (!live.vehicle) {
            live.vehicle = customer.vehicle;
          }
          if (!live.mileage) {
            live.mileage = String(customer.mileage);
          }
          if (!live.day) {
            live.day = runtime.activeBoardDay || "Friday";
          }
        }

        clearLiveResolutionError();
        renderLiveResolutionPanel();
      }

      function validateOutcomeDetails(outcome, details, onError) {
        function fail(message) {
          if (onError) {
            onError(message);
          }
          return null;
        }

        if (outcome === "Appointment Booked") {
          var vehicleValue = (details.vehicle || "").trim();
          var mileageValue = Number(details.mileage);
          var dayValue = details.day || "";
          var slotValue = details.slot || "";

          if (!dayValue) {
            return fail("Select a date before completing.");
          }

          if (!slotValue) {
            return fail("Select an open time slot before completing.");
          }

          if (!vehicleValue) {
            return fail("Confirm the vehicle to continue.");
          }

          if (!Number.isFinite(mileageValue) || mileageValue < 0) {
            return fail("Confirm mileage with a valid number.");
          }

          if (runtime.bookedSlots[dayValue].has(slotValue)) {
            return fail("That slot has already been booked.");
          }

          return {
            day: dayValue,
            slot: slotValue,
            vehicle: vehicleValue,
            mileage: Math.floor(mileageValue)
          };
        }

        if (outcome === "Wants Info") {
          var infoNeeded = (details.infoNeeded || "").trim();
          var infoWhy = (details.infoWhy || "").trim();

          if (!infoNeeded) {
            return fail("Add what information the customer requested.");
          }

          if (!infoWhy) {
            return fail("Add why the information matters to the customer.");
          }

          return {
            infoNeeded: infoNeeded,
            infoWhy: infoWhy
          };
        }

        return {};
      }

      function applyOutcomeDetails(outcome, details, customer, onError) {
        var normalized = validateOutcomeDetails(outcome, details, onError);
        if (!normalized) {
          return false;
        }

        if (outcome === "Appointment Booked") {
          if (customer) {
            customer.vehicle = normalized.vehicle;
            customer.mileage = normalized.mileage;
          }

          runtime.bookedSlots[normalized.day].add(normalized.slot);
          runtime.justBookedKey = normalized.day + "|" + normalized.slot;
          renderBookingBoard(runtime.justBookedKey);
          return true;
        }

        if (outcome === "Wants Info") {
          if (customer) {
            customer.infoNeeded = normalized.infoNeeded;
            customer.infoWhy = normalized.infoWhy;
            renderCustomerInsight(customer);
          }

          runtime.justBookedKey = "";
          return true;
        }

        runtime.justBookedKey = "";
        return true;
      }

      function lockLiveResolution() {
        if (!currentCallActive) {
          return;
        }

        var live = runtime.liveResolution;

        if (!live.outcome) {
          setLiveResolutionError("Select a resolution before locking.");
          return;
        }

        var normalized = validateOutcomeDetails(
          live.outcome,
          {
            day: live.day,
            slot: live.slot,
            vehicle: live.vehicle,
            mileage: live.mileage,
            infoNeeded: live.infoNeeded,
            infoWhy: live.infoWhy
          },
          setLiveResolutionError
        );

        if (!normalized) {
          return;
        }

        if (live.outcome === "Appointment Booked") {
          live.day = normalized.day;
          live.slot = normalized.slot;
          live.vehicle = normalized.vehicle;
          live.mileage = String(normalized.mileage);
          live.summary = "Appointment locked: " + live.day + " at " + live.slot + " (ready on hangup)";
        } else if (live.outcome === "Wants Info") {
          live.infoNeeded = normalized.infoNeeded;
          live.infoWhy = normalized.infoWhy;
          live.summary = "Wants Info locked (ready on hangup)";
        } else {
          live.summary = live.outcome + " locked (ready on hangup)";
        }

        live.locked = true;
        clearLiveResolutionError();
        renderLiveResolutionPanel();
      }

      function updatePowerModeBadge() {
        var label = "Power Mode Inactive";
        if (powerModeActive) {
          label = "Power Mode Active";
        } else if (runtime.queueComplete) {
          label = "Queue Complete";
        }
        els.powerModeLabel.textContent = label;
        els.powerModeDot.classList.toggle("is-active", powerModeActive);
      }

      function startSessionTimer() {
        stopSessionTimer();
        if (!sessionStartTime) {
          animateMetricValue(els.sessionTimerStat, "00:00");
          return;
        }
        animateMetricValue(els.sessionTimerStat, formatTimer(Math.floor((Date.now() - sessionStartTime) / 1000)));
        runtime.sessionTickInterval = setInterval(function () {
          if (!sessionStartTime) {
            return;
          }
          var elapsed = Math.floor((Date.now() - sessionStartTime) / 1000);
          animateMetricValue(els.sessionTimerStat, formatTimer(elapsed));
        }, 1000);
      }

      function stopSessionTimer() {
        if (runtime.sessionTickInterval) {
          clearInterval(runtime.sessionTickInterval);
          runtime.sessionTickInterval = null;
        }
      }

      function updateControlState() {
        var queueDone = runtime.nextIndex >= customers.length;
        var blockControls = runtime.modalOpen || runtime.pauseLightboxOpen;
        var connectedState = currentCallActive && !runtime.modalOpen && !runtime.pauseLightboxOpen;
        var showBeepButton = connectedState && !runtime.voicemailPrompted && !runtime.voicemailDropping;
        var showDropButton = connectedState && runtime.voicemailPrompted && !runtime.voicemailDropping;

        els.campaignSelect.disabled = powerModeActive || currentCallActive || blockControls || runtime.voicemailDropping;
        els.startBlockBtn.disabled = powerModeActive || queueDone || blockControls || runtime.voicemailDropping;
        els.endBlockBtn.disabled = (!powerModeActive && !currentCallActive) || blockControls;
        els.pauseAfterBtn.disabled = (!powerModeActive && !currentCallActive) || blockControls || runtime.voicemailDropping;

        els.startBlockBtn.textContent = queueDone ? "Queue Complete" : (powerModeActive ? "Booking Block Running" : "Start Booking Block");
        els.pauseAfterBtn.textContent = pauseAfterCall && currentCallActive ? "Pause Queued" : "Pause After This Call";

        els.voicemailBeepBtn.classList.toggle("wd-hidden", !showBeepButton);
        els.dropVoicemailBtn.classList.toggle("wd-hidden", !showDropButton);
        els.voicemailBeepBtn.disabled = !showBeepButton || runtime.voicemailDropping;
        els.dropVoicemailBtn.disabled = !showDropButton || runtime.voicemailDropping;

        els.callTimer.classList.toggle("is-dim", runtime.voicemailDropping);
        renderLiveResolutionPanel();
      }

      function updateStats() {
        var calls = runtime.stats.callsMade;
        var connections = runtime.stats.connections;
        var bookings = runtime.stats.bookings;
        var voicemailsLeft = runtime.stats.voicemailsLeft;
        var callbacksScheduled = runtime.stats.callbacksScheduled;
        var finalized = runtime.stats.finalized;
        var callsLeft = Math.max(customers.length - runtime.nextIndex, 0);
        var bookingRate = calls ? (bookings / calls) * 100 : 0;
        var progressPct = customers.length ? (finalized / customers.length) * 100 : 0;

        animateMetricValue(els.callsMadeStat, calls);
        animateMetricValue(els.connectionsStat, connections);
        animateMetricValue(els.bookingsStat, bookings);
        animateMetricValue(els.bookingRateStat, bookingRate.toFixed(1) + "%");
        animateMetricValue(els.bookedToday, bookings);

        animateMetricValue(els.callsMadePower, calls);
        animateMetricValue(els.voicemailsLeftPower, voicemailsLeft);
        animateMetricValue(els.callsLeftPower, callsLeft);
        animateMetricValue(els.bookingsPower, bookings);
        animateMetricValue(els.bookingRatePower, bookingRate.toFixed(1) + "%");
        animateMetricValue(els.campaignProgressText, finalized + "/" + customers.length + " Finalized");
        animateMetricValue(els.voicemailsLeftInline, voicemailsLeft);
        animateMetricValue(els.callbacksScheduledInline, callbacksScheduled);
        els.campaignProgressFill.style.width = progressPct.toFixed(1) + "%";
      }

      function updateCampaignText() {
        runtime.campaign = els.campaignSelect.value;
        els.activeCampaignName.textContent = runtime.campaign;
        els.snapshotCampaignName.textContent = runtime.campaign;
      }

      function renderHighMileage(mileage) {
        var isHighMileage = mileage > 120000;
        els.highMileageBadge.classList.toggle("wd-hidden", !isHighMileage);
      }

      function renderCustomerInsight(customer) {
        if (!customer) {
          els.customerInsight.textContent = "No customer in queue.";
          return;
        }

        var infoNeeded = customer.infoNeeded ? customer.infoNeeded.trim() : "";
        var infoWhy = customer.infoWhy ? customer.infoWhy.trim() : "";

        if (!infoNeeded && !infoWhy) {
          els.customerInsight.textContent = "No info requests logged for this customer yet.";
          return;
        }

        var notes = [];
        if (infoNeeded) {
          notes.push("Needs: " + infoNeeded);
        }
        if (infoWhy) {
          notes.push("Why: " + infoWhy);
        }
        els.customerInsight.textContent = notes.join(" ");
      }

      function renderCustomer(animate) {
        var customer = getCurrentCustomer();

        function writeCustomer() {
          els.vmSentTag.classList.remove("show");
          if (!customer) {
            els.customerName.textContent = "Queue Complete";
            els.customerPhone.textContent = "-";
            els.customerVehicle.textContent = "-";
            els.customerPurchase.textContent = "-";
            els.equityBadge.textContent = "N/A";
            els.equityBadge.classList.remove("positive", "watch");
            els.mileageInput.value = "";
            els.snapshotName.textContent = "Queue Complete";
            els.snapshotVehicle.textContent = "No remaining customers";
            els.snapshotPurchase.textContent = "Last Purchase: -";
            els.snapshotMileage.textContent = "Mileage: -";
            renderHighMileage(0);
            renderCustomerInsight(null);
            return;
          }

          els.customerName.textContent = customer.name;
          els.customerPhone.textContent = customer.phone;
          els.customerVehicle.textContent = customer.vehicle;
          els.customerPurchase.textContent = customer.purchaseDate;
          els.equityBadge.textContent = customer.equity ? "Equity Positive" : "Equity Watch";
          els.equityBadge.classList.toggle("positive", customer.equity);
          els.equityBadge.classList.toggle("watch", !customer.equity);
          els.mileageInput.value = String(customer.mileage);

          els.snapshotName.textContent = customer.name;
          els.snapshotVehicle.textContent = customer.vehicle;
          els.snapshotPurchase.textContent = "Last Purchase: " + customer.purchaseDate;
          els.snapshotMileage.textContent = "Mileage: " + customer.mileage.toLocaleString() + " mi";
          renderHighMileage(customer.mileage);
          renderCustomerInsight(customer);
        }

        if (!animate) {
          writeCustomer();
          return;
        }

        els.customerPanel.classList.add("is-fading");
        els.snapshotIdentity.classList.add("is-fading");

        setTimeout(function () {
          writeCustomer();
          requestAnimationFrame(function () {
            els.customerPanel.classList.remove("is-fading");
            els.snapshotIdentity.classList.remove("is-fading");
          });
        }, 100);
      }

      function renderBookingBoard(animateKey) {
        var day = runtime.activeBoardDay;
        var slots = SLOT_TEMPLATE[day];
        var html = "";

        els.boardTabs.forEach(function (tab) {
          tab.classList.toggle("is-active", tab.dataset.day === day);
        });

        els.boardHours.textContent = BOARD_HOURS[day];

        slots.forEach(function (slot) {
          var key = day + "|" + slot;
          var booked = runtime.bookedSlots[day].has(slot);
          var cls = "wd-board-slot" + (booked ? " is-booked" : "") + (animateKey && animateKey === key ? " just-booked" : "");
          html += '<div class="' + cls + '">' + slot + "</div>";
        });

        els.boardSlots.innerHTML = html;
      }

      function openDispositionModal(preselectedOutcome) {
        var live = runtime.liveResolution;
        var hasStagedResolution = !!live.outcome;
        runtime.modalOpen = true;
        runtime.selectedOutcome = preselectedOutcome || live.outcome || "";
        runtime.selectedDay = hasStagedResolution ? (live.day || runtime.activeBoardDay) : runtime.activeBoardDay;
        runtime.selectedSlot = hasStagedResolution ? (live.slot || "") : "";

        var customer = getCurrentCustomer();
        if (customer) {
          els.confirmVehicleInput.value = live.vehicle || customer.vehicle;
          els.confirmMileageInput.value = live.mileage || els.mileageInput.value || String(customer.mileage);
          els.infoNeededInput.value = live.infoNeeded || customer.infoNeeded || "";
          els.infoWhyInput.value = live.infoWhy || customer.infoWhy || "";
        } else {
          els.confirmVehicleInput.value = live.vehicle || "";
          els.confirmMileageInput.value = live.mileage || "";
          els.infoNeededInput.value = live.infoNeeded || "";
          els.infoWhyInput.value = live.infoWhy || "";
        }
        els.confirmMileageInput.dataset.userEdited = "";
        els.appointmentDaySelect.value = runtime.selectedDay;
        els.modalError.textContent = "";

        renderOutcomeButtons();
        toggleAppointmentFields();
        renderModalSlotList();

        els.modalBackdrop.classList.add("open");
        els.modalBackdrop.setAttribute("aria-hidden", "false");
        syncBodyLock();
      }

      function closeDispositionModal() {
        runtime.modalOpen = false;
        runtime.selectedOutcome = "";
        runtime.selectedSlot = "";
        els.modalError.textContent = "";
        els.infoNeededInput.value = "";
        els.infoWhyInput.value = "";
        els.modalBackdrop.classList.remove("open");
        els.modalBackdrop.setAttribute("aria-hidden", "true");
        syncBodyLock();
      }

      function renderOutcomeButtons() {
        var buttons = els.outcomeGrid.querySelectorAll(".wd-outcome-btn");
        buttons.forEach(function (btn) {
          btn.classList.toggle("is-active", btn.dataset.outcome === runtime.selectedOutcome);
        });
      }

      function toggleAppointmentFields() {
        var showAppointment = runtime.selectedOutcome === "Appointment Booked";
        var showWantsInfo = runtime.selectedOutcome === "Wants Info";
        els.appointmentFields.classList.toggle("wd-hidden", !showAppointment);
        els.wantsInfoFields.classList.toggle("wd-hidden", !showWantsInfo);
      }

      function renderModalSlotList() {
        if (runtime.selectedOutcome !== "Appointment Booked") {
          els.modalSlotList.innerHTML = "";
          return;
        }

        var day = runtime.selectedDay;
        var slots = SLOT_TEMPLATE[day];
        var html = "";
        var openCount = 0;

        slots.forEach(function (slot) {
          var booked = runtime.bookedSlots[day].has(slot);
          if (!booked) {
            openCount += 1;
          }
          var selected = runtime.selectedSlot === slot;
          html += '<button type="button" class="wd-slot-choice' +
            (selected ? " is-selected" : "") +
            '" data-slot="' + slot + '"' +
            (booked ? " disabled" : "") +
            ">" + slot + (booked ? " (Booked)" : "") + "</button>";
        });

        if (!openCount) {
          html += '<div class="wd-slot-empty">No open slots available for this day.</div>';
        }

        els.modalSlotList.innerHTML = html;
      }

      function showModalError(message) {
        els.modalError.textContent = message;
      }

      function clearModalError() {
        els.modalError.textContent = "";
      }

      function showPauseLightbox() {
        runtime.pauseLightboxOpen = true;
        els.pauseBackdrop.classList.add("open");
        els.pauseBackdrop.setAttribute("aria-hidden", "false");
        setStatus("Power Mode Paused");
        syncBodyLock();
        updateControlState();
      }

      function closePauseLightbox() {
        runtime.pauseLightboxOpen = false;
        els.pauseBackdrop.classList.remove("open");
        els.pauseBackdrop.setAttribute("aria-hidden", "true");
        syncBodyLock();
        updateControlState();
      }

      function loadQueueCustomer(index, animate) {
        runtime.currentIndex = index;
        renderCustomer(animate);
      }

      function stopAllCallActivity() {
        clearFlowTimers();
        stopCallTimerTick();
        callTimer = 0;
        updateCallTimerDisplay();
        currentCallActive = false;
        resetVoicemailState();
        resetLiveResolutionState();
        updatePauseIndicator();
      }

      function handleQueueComplete() {
        stopAllCallActivity();
        powerModeActive = false;
        pauseAfterCall = false;
        runtime.queueComplete = true;
        stopSessionTimer();
        setStatus("Queue Complete");
        updatePowerModeBadge();
        updatePauseIndicator();
        updateStats();
        updateControlState();
      }

      function endCurrentCallAndOpenDisposition() {
        if (runtime.voicemailPrompted || runtime.voicemailDropping || runtime.dispositionState === "Left Voicemail") {
          return;
        }
        stopCallTimerTick();
        currentCallActive = false;
        resetVoicemailState();
        setStatus("Call Ended");
        updatePauseIndicator();
        if (runtime.liveResolution.locked && runtime.liveResolution.outcome) {
          var lockedOutcome = runtime.liveResolution.outcome;
          var customer = getCurrentCustomer();
          var lockedApplied = applyOutcomeDetails(
            lockedOutcome,
            {
              day: runtime.liveResolution.day,
              slot: runtime.liveResolution.slot,
              vehicle: runtime.liveResolution.vehicle,
              mileage: runtime.liveResolution.mileage,
              infoNeeded: runtime.liveResolution.infoNeeded,
              infoWhy: runtime.liveResolution.infoWhy
            },
            customer
          );

          if (!lockedApplied) {
            runtime.liveResolution.locked = false;
            updateControlState();
            openDispositionModal(lockedOutcome);
            return;
          }

          recordAttempt(lockedOutcome);
          resetLiveResolutionState();
          updateControlState();
          if (pauseAfterCall) {
            showPauseLightbox();
            return;
          }
          autoDialNext();
          return;
        }

        updateControlState();
        openDispositionModal(runtime.liveResolution.outcome || "");
      }

      function autoDialNext() {
        if (!powerModeActive || runtime.modalOpen || runtime.pauseLightboxOpen) {
          return;
        }

        if (pauseAfterCall) {
          showPauseLightbox();
          return;
        }

        if (runtime.nextIndex >= customers.length) {
          handleQueueComplete();
          return;
        }

        runtime.queueComplete = false;
        resetVoicemailState();
        resetLiveResolutionState();
        loadQueueCustomer(runtime.nextIndex, true);
        runtime.nextIndex += 1;
        updateStats();

        setStatus("Dialing Customer...");
        triggerGoldPulse();
        stopCallTimerTick();
        callTimer = 0;
        updateCallTimerDisplay();
        updateControlState();
        updatePowerModeBadge();
        clearFlowTimers();

        runtime.flowTimers.push(setTimeout(function () {
          if (!powerModeActive || pauseAfterCall || runtime.modalOpen || runtime.pauseLightboxOpen) {
            return;
          }
          currentCallActive = true;
          runtime.dispositionState = "";
          setStatus("Connected");
          updatePauseIndicator();
          updateControlState();
          startCallTimerTick();

          var simulatedDuration = 5 + Math.floor(Math.random() * 11);
          runtime.callDurationTimeout = setTimeout(function () {
            if (runtime.voicemailPrompted || runtime.voicemailDropping) {
              return;
            }
            if (!powerModeActive && !currentCallActive) {
              return;
            }
            endCurrentCallAndOpenDisposition();
          }, simulatedDuration * 1000);
        }, DIAL_TO_CONNECT_DELAY_MS));
      }

      function startBookingBlock() {
        if (powerModeActive || runtime.modalOpen || runtime.pauseLightboxOpen) {
          return;
        }

        if (runtime.nextIndex >= customers.length) {
          handleQueueComplete();
          return;
        }

        powerModeActive = true;
        pauseAfterCall = false;
        currentCallActive = false;
        runtime.queueComplete = false;
        resetVoicemailState();
        resetLiveResolutionState();
        sessionStartTime = Date.now();
        startSessionTimer();
        setStatus("Connecting to You...");
        updatePowerModeBadge();
        updatePauseIndicator();
        updateControlState();
        clearFlowTimers();

        runtime.flowTimers.push(setTimeout(function () {
          if (!powerModeActive) {
            return;
          }
          setStatus("Connected - Power Mode Active");
          updateControlState();
          autoDialNext();
        }, CONNECT_TO_YOU_DELAY_MS));
      }

      function endBookingBlock() {
        if (!powerModeActive && !currentCallActive) {
          return;
        }
        powerModeActive = false;
        pauseAfterCall = false;
        stopAllCallActivity();
        closeDispositionModal();
        closePauseLightbox();
        stopSessionTimer();
        setStatus("Session Ended");
        updatePowerModeBadge();
        updatePauseIndicator();
        updateControlState();
      }

      function requestPauseAfterCall() {
        if (currentCallActive) {
          pauseAfterCall = true;
          updatePauseIndicator();
          updateControlState();
          return;
        }
        pauseAfterCall = true;
        showPauseLightbox();
      }

      function recordAttempt(outcome) {
        runtime.dispositionState = outcome;
        runtime.stats.callsMade += 1;
        if (Math.random() < CONNECT_PROBABILITY) {
          runtime.stats.connections += 1;
        }

        if (outcome === "Appointment Booked") {
          runtime.stats.bookings += 1;
          runtime.stats.finalized += 1;
        } else if (outcome === "Call Back Later") {
          runtime.stats.callbacksScheduled += 1;
        } else if (outcome === "Wants Info") {
          runtime.stats.callbacksScheduled += 1;
        } else if (outcome === "Left Voicemail") {
          runtime.stats.voicemailsLeft += 1;
          runtime.stats.callbacksScheduled += 1;
        } else {
          runtime.stats.finalized += 1;
        }

        updateStats();
      }

      function onVoicemailBeepHeard() {
        if (!currentCallActive || runtime.voicemailDropping) {
          return;
        }
        runtime.voicemailPrompted = true;
        clearCallDurationTimeout();
        updateControlState();
      }

      function onDropVoicemailAndContinue() {
        if (!currentCallActive || runtime.voicemailDropping) {
          return;
        }

        runtime.voicemailDropping = true;
        runtime.dispositionState = "Left Voicemail";
        clearFlowTimers();
        stopCallTimerTick();
        showVoicemailLeavingUi();
        updateControlState();

        runtime.flowTimers.push(setTimeout(function () {
          if (!powerModeActive && !currentCallActive) {
            return;
          }

          setStatus("Voicemail Delivered");
          showVoicemailDeliveredUi();
          flashVmSentTag();
          closeDispositionModal();

          currentCallActive = false;
          runtime.voicemailPrompted = false;
          runtime.voicemailDropping = false;
          updatePauseIndicator();

          recordAttempt("Left Voicemail");
          resetLiveResolutionState();
          updateControlState();

          runtime.flowTimers.push(setTimeout(function () {
            hideVoicemailInline();
            if (pauseAfterCall) {
              showPauseLightbox();
              return;
            }
            autoDialNext();
          }, 180));
        }, 900));
      }

      function setOutcome(outcome) {
        runtime.selectedOutcome = outcome;
        runtime.selectedSlot = "";
        clearModalError();
        toggleAppointmentFields();
        renderOutcomeButtons();
        renderModalSlotList();
      }

      function completeDisposition() {
        if (!runtime.selectedOutcome) {
          showModalError("Select a primary outcome to continue.");
          return;
        }

        var customer = getCurrentCustomer();
        var applied = applyOutcomeDetails(
          runtime.selectedOutcome,
          {
            day: runtime.selectedDay,
            slot: runtime.selectedSlot,
            vehicle: els.confirmVehicleInput.value,
            mileage: els.confirmMileageInput.value,
            infoNeeded: els.infoNeededInput.value,
            infoWhy: els.infoWhyInput.value
          },
          customer,
          showModalError
        );

        if (!applied) {
          return;
        }

        recordAttempt(runtime.selectedOutcome);
        resetLiveResolutionState();

        closeDispositionModal();

        if (pauseAfterCall) {
          showPauseLightbox();
          return;
        }

        autoDialNext();
      }

      function resetSession() {
        powerModeActive = false;
        pauseAfterCall = false;
        currentCallActive = false;
        callTimer = 0;
        sessionStartTime = null;

        clearFlowTimers();
        stopCallTimerTick();
        stopSessionTimer();

        runtime.currentIndex = 0;
        runtime.nextIndex = 0;
        runtime.queueComplete = false;
        runtime.activeBoardDay = "Friday";
        runtime.voicemailPrompted = false;
        runtime.voicemailDropping = false;
        runtime.dispositionState = "";
        runtime.selectedOutcome = "";
        runtime.selectedDay = "Friday";
        runtime.selectedSlot = "";
        runtime.justBookedKey = "";
        runtime.liveResolution = createEmptyLiveResolution("Friday");
        runtime.bookedSlots = {
          Friday: new Set(),
          Saturday: new Set()
        };
        runtime.stats = {
          callsMade: 0,
          connections: 0,
          bookings: 0,
          voicemailsLeft: 0,
          callbacksScheduled: 0,
          finalized: 0
        };

        closeDispositionModal();
        closePauseLightbox();
        hideVoicemailInline();
        clearLiveResolutionError();

        updatePowerModeBadge();
        updateStats();
        setStatus("Ready");
        animateMetricValue(els.sessionTimerStat, "00:00");
        updateCallTimerDisplay();
        renderCustomer(false);
        renderBookingBoard("");
        updatePauseIndicator();
        updateControlState();
      }

      function resumeBookingBlock() {
        if (!runtime.pauseLightboxOpen) {
          return;
        }
        pauseAfterCall = false;
        closePauseLightbox();

        if (!powerModeActive) {
          powerModeActive = true;
          if (!sessionStartTime) {
            sessionStartTime = Date.now();
          }
          startSessionTimer();
        }

        setStatus("Connected - Power Mode Active");
        updatePowerModeBadge();
        updatePauseIndicator();
        updateControlState();
        autoDialNext();
      }

      function endSessionFromPause() {
        resetSession();
      }

      function bindEvents() {
        els.campaignSelect.addEventListener("change", function () {
          updateCampaignText();
        });

        els.startBlockBtn.addEventListener("click", function () {
          startBookingBlock();
        });

        els.endBlockBtn.addEventListener("click", function () {
          endBookingBlock();
        });

        els.pauseAfterBtn.addEventListener("click", function () {
          requestPauseAfterCall();
        });

        els.voicemailBeepBtn.addEventListener("click", function () {
          onVoicemailBeepHeard();
        });

        els.dropVoicemailBtn.addEventListener("click", function () {
          onDropVoicemailAndContinue();
        });

        els.liveOutcomeButtons.addEventListener("click", function (event) {
          var button = event.target.closest(".wd-live-outcome-btn[data-live-outcome]");
          if (!button || button.disabled) {
            return;
          }
          setLiveOutcome(button.dataset.liveOutcome);
        });

        els.liveDaySelect.addEventListener("change", function () {
          runtime.liveResolution.day = els.liveDaySelect.value;
          runtime.liveResolution.slot = "";
          runtime.liveResolution.locked = false;
          runtime.liveResolution.summary = "";
          clearLiveResolutionError();
          renderLiveResolutionPanel();
        });

        els.liveSlotSelect.addEventListener("change", function () {
          runtime.liveResolution.slot = els.liveSlotSelect.value;
          runtime.liveResolution.locked = false;
          runtime.liveResolution.summary = "";
          clearLiveResolutionError();
          renderLiveResolutionPanel();
        });

        els.liveVehicleInput.addEventListener("input", function () {
          runtime.liveResolution.vehicle = els.liveVehicleInput.value;
          runtime.liveResolution.locked = false;
          runtime.liveResolution.summary = "";
          clearLiveResolutionError();
        });

        els.liveMileageInput.addEventListener("input", function () {
          runtime.liveResolution.mileage = els.liveMileageInput.value;
          runtime.liveResolution.locked = false;
          runtime.liveResolution.summary = "";
          clearLiveResolutionError();
        });

        els.liveInfoNeededInput.addEventListener("input", function () {
          runtime.liveResolution.infoNeeded = els.liveInfoNeededInput.value;
          runtime.liveResolution.locked = false;
          runtime.liveResolution.summary = "";
          clearLiveResolutionError();
        });

        els.liveInfoWhyInput.addEventListener("input", function () {
          runtime.liveResolution.infoWhy = els.liveInfoWhyInput.value;
          runtime.liveResolution.locked = false;
          runtime.liveResolution.summary = "";
          clearLiveResolutionError();
        });

        els.lockLiveResolutionBtn.addEventListener("click", function () {
          lockLiveResolution();
        });

        els.clearLiveResolutionBtn.addEventListener("click", function () {
          resetLiveResolutionState();
          renderLiveResolutionPanel();
        });

        els.mileageInput.addEventListener("input", function () {
          var value = Number(els.mileageInput.value);
          if (!Number.isFinite(value) || value < 0) {
            return;
          }
          var rounded = Math.floor(value);
          var current = getCurrentCustomer();
          if (current) {
            current.mileage = rounded;
          }
          els.snapshotMileage.textContent = "Mileage: " + rounded.toLocaleString() + " mi";
          renderHighMileage(rounded);
        });

        els.boardTabs.forEach(function (tab) {
          tab.addEventListener("click", function () {
            runtime.activeBoardDay = tab.dataset.day;
            renderBookingBoard("");
          });
        });

        els.outcomeGrid.addEventListener("click", function (event) {
          var button = event.target.closest(".wd-outcome-btn");
          if (!button) {
            return;
          }
          setOutcome(button.dataset.outcome);
        });

        els.appointmentDaySelect.addEventListener("change", function () {
          runtime.selectedDay = els.appointmentDaySelect.value;
          runtime.selectedSlot = "";
          clearModalError();
          renderModalSlotList();
        });

        els.modalSlotList.addEventListener("click", function (event) {
          var button = event.target.closest(".wd-slot-choice[data-slot]");
          if (!button || button.disabled) {
            return;
          }
          runtime.selectedSlot = button.dataset.slot;
          clearModalError();
          renderModalSlotList();
        });

        els.confirmMileageInput.addEventListener("input", function () {
          els.confirmMileageInput.dataset.userEdited = "true";
        });

        els.infoNeededInput.addEventListener("input", function () {
          clearModalError();
        });

        els.infoWhyInput.addEventListener("input", function () {
          clearModalError();
        });

        els.completeDispositionBtn.addEventListener("click", function () {
          completeDisposition();
        });

        els.resumeBlockBtn.addEventListener("click", function () {
          resumeBookingBlock();
        });

        els.pauseEndSessionBtn.addEventListener("click", function () {
          endSessionFromPause();
        });

        els.endSessionLink.addEventListener("click", function () {
          if (window.confirm("End this booking session and reset stats?")) {
            resetSession();
          }
        });
      }

      function init() {
        updateCampaignText();
        updatePowerModeBadge();
        setStatus("Ready");
        animateMetricValue(els.sessionTimerStat, "00:00");
        updateCallTimerDisplay();
        updateStats();
        renderCustomer(false);
        renderBookingBoard("");
        updatePauseIndicator();
        hideVoicemailInline();
        updateControlState();
        bindEvents();
      }

      init();
    })();
  </script>
</body>
</html>
