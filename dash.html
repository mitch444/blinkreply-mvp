<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DealerSignal Manager Dashboard</title>
  <style>
    :root {
      --bg: #0f141a;
      --panel: #151c23;
      --panel-2: #1c2530;
      --border: #2b3745;
      --text: #e6edf3;
      --muted: #9fb0c0;
      --accent: #47b1ff;
      --good: #2dd4bf;
      --warn: #f59e0b;
      --bad: #ef4444;
      --shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: "Segoe UI", Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
    }

    .page {
      max-width: 1200px;
      margin: 0 auto;
      padding: 24px;
    }

    #topNav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      padding: 16px 20px;
      border: 1px solid var(--border);
      border-radius: 12px;
      background: var(--panel);
      margin-bottom: 16px;
      box-shadow: var(--shadow);
    }

    #brandBlock {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    #logo {
      width: 180px;
      height: 180px;
      object-fit: contain;
    }

    #brandTitle {
      font-size: 18px;
      font-weight: bold;
    }

    .helper-line {
      font-size: 13px;
      color: var(--muted);
    }

    #navActions {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .nav-link {
      font-size: 12px;
      color: var(--accent);
      text-decoration: none;
      border: 1px solid var(--border);
      padding: 6px 10px;
      border-radius: 6px;
      background: var(--panel-2);
    }

    .nav-link:hover {
      background: #223041;
    }

    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 20px;
      margin-bottom: 24px;
    }

    .header-controls {
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 8px;
      min-width: 320px;
    }

    .range-label {
      font-size: 12px;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    .range-buttons {
      display: flex;
      flex-wrap: wrap;
      justify-content: flex-end;
      gap: 6px;
    }

    .range-btn {
      border: 1px solid var(--border);
      background: var(--panel-2);
      color: var(--text);
      font-size: 12px;
      padding: 6px 10px;
      border-radius: 999px;
      cursor: pointer;
    }

    .range-btn.active {
      border-color: var(--accent);
      color: var(--accent);
      background: rgba(71, 177, 255, 0.15);
    }

    .range-selected {
      font-size: 12px;
      color: var(--muted);
    }

    .custom-range {
      display: none;
      gap: 6px;
      align-items: center;
      justify-content: flex-end;
    }

    .custom-range input {
      background: var(--panel-2);
      border: 1px solid var(--border);
      color: var(--text);
      padding: 4px 6px;
      border-radius: 6px;
      font-size: 12px;
    }

    .custom-range.show {
      display: flex;
    }

    .header h1 {
      margin: 0 0 6px;
      font-size: 24px;
    }

    .header p {
      margin: 0;
      color: var(--muted);
      font-size: 14px;
    }

    .kpi-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 16px;
      margin-bottom: 24px;
    }

    .kpi {
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 18px;
      box-shadow: var(--shadow);
    }

    .kpi .label {
      color: var(--muted);
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      margin-bottom: 8px;
    }

    .kpi .value {
      font-size: 28px;
      font-weight: bold;
    }

    .grid {
      display: grid;
      grid-template-columns: 2fr 1.2fr;
      gap: 18px;
    }

    .panel {
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 18px;
      margin-bottom: 18px;
      box-shadow: var(--shadow);
    }

    .panel h2 {
      margin: 0 0 4px;
      font-size: 16px;
    }

    .panel .subtext {
      margin: 0 0 14px;
      color: var(--muted);
      font-size: 12px;
    }

    .bar-row {
      display: grid;
      grid-template-columns: 140px 1fr 90px;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
      font-size: 13px;
    }

    .bar {
      height: 10px;
      background: var(--panel-2);
      border-radius: 999px;
      overflow: hidden;
    }

    .bar-fill {
      height: 100%;
      background: linear-gradient(90deg, #47b1ff, #2dd4bf);
      border-radius: 999px;
    }

    .daily-chart {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 10px;
      align-items: end;
      height: 160px;
    }

    .day-bar {
      background: var(--panel-2);
      border-radius: 8px;
      position: relative;
      height: 100%;
      display: flex;
      align-items: flex-end;
      justify-content: center;
      padding-bottom: 6px;
      color: var(--muted);
      font-size: 11px;
    }

    .day-bar .fill {
      width: 100%;
      background: #47b1ff;
      border-radius: 8px;
    }

    .day-bar .label {
      position: absolute;
      bottom: -18px;
      width: 100%;
      text-align: center;
      font-size: 11px;
      color: var(--muted);
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 13px;
    }

    th, td {
      text-align: left;
      padding: 8px 6px;
      border-bottom: 1px solid var(--border);
    }

    th {
      color: var(--muted);
      font-weight: 600;
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.04em;
    }

    tr.highlight {
      background: rgba(45, 212, 191, 0.12);
    }

    .badge {
      display: inline-block;
      padding: 2px 6px;
      border-radius: 999px;
      font-size: 11px;
      margin-left: 6px;
    }

    .badge.good {
      background: rgba(45, 212, 191, 0.18);
      color: var(--good);
    }

    .badge.warn {
      background: rgba(245, 158, 11, 0.18);
      color: var(--warn);
    }

    .badge.bad {
      background: rgba(239, 68, 68, 0.18);
      color: var(--bad);
    }

    .kpi-targets {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 10px;
      margin-top: 12px;
    }

    .kpi-target {
      background: var(--panel-2);
      border-radius: 10px;
      padding: 10px;
      font-size: 12px;
    }

    .funnel {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 8px;
      align-items: stretch;
    }

    .funnel-step {
      background: var(--panel-2);
      border-radius: 10px;
      padding: 10px;
      text-align: center;
    }

    .funnel-step .count {
      font-size: 20px;
      font-weight: bold;
      margin-bottom: 6px;
    }

    .funnel-step .label {
      font-size: 12px;
      color: var(--muted);
    }

    .recent-item {
      display: grid;
      grid-template-columns: 1.2fr 1.2fr 0.8fr 1fr 0.8fr;
      gap: 8px;
      padding: 10px 0;
      border-bottom: 1px solid var(--border);
      font-size: 13px;
    }

    .recent-item:last-child { border-bottom: none; }

    .flag {
      color: var(--bad);
      font-weight: bold;
    }

    @media (max-width: 980px) {
      .grid { grid-template-columns: 1fr; }
      .header { flex-direction: column; align-items: flex-start; }
      .header-controls { align-items: flex-start; }
      .range-buttons { justify-content: flex-start; }
      .recent-item { grid-template-columns: 1fr 1fr; grid-auto-rows: auto; }
    }
  </style>
</head>
<body>
  <div class="page">
    <nav id="topNav">
      <div id="brandBlock">
        <img src="logoW.png" alt="DealerSignal logo" id="logo" />
        <div>
          <div id="brandTitle">DealerSignal — BlinkReply Rapid Response (Local MVP)</div>
          <div class="helper-line">Speed-to-lead routing that plugs into PrairieCRM and syncs to DealerSocket.</div>
        </div>
      </div>
      <div id="navActions">
        <a href="index.html" class="nav-link">Rapid Response</a>
        <a href="dash.html" class="nav-link">Dashboard</a>
        <a href="eg.html" class="nav-link">Examples</a>
        <a href="settings.html" class="nav-link">Settings</a>
      </div>
    </nav>
    <div class="header">
      <div>
        <h1>DealerSignal — Manager Dashboard (Jan 2026)</h1>
        <p>Speed-to-lead performance overview powered by BlinkReply routing.</p>
      </div>
      <div class="header-controls">
        <div class="range-label">Performance Window</div>
        <div class="range-buttons" id="rangeButtons"></div>
        <div class="custom-range" id="customRange">
          <input type="date" id="customStart" />
          <span>to</span>
          <input type="date" id="customEnd" />
        </div>
        <div class="range-selected" id="rangeSelected">Last 7 Days</div>
      </div>
    </div>

    <div class="kpi-grid">
      <div class="kpi">
        <div class="label">Total Leads (Jan 2026)</div>
        <div class="value" id="kpiTotal">0</div>
      </div>
      <div class="kpi">
        <div class="label">Avg Response Time (seconds)</div>
        <div class="value" id="kpiAvg">0</div>
      </div>
      <div class="kpi">
        <div class="label">% Claimed &lt; 60s</div>
        <div class="value" id="kpiUnder60">0%</div>
      </div>
      <div class="kpi">
        <div class="label">% Claimed &lt; 120s</div>
        <div class="value" id="kpiUnder120">0%</div>
      </div>
    </div>

    <div class="grid">
      <div>
        <div class="panel">
          <h2>Leads by Source</h2>
          <p class="subtext">Volume mix and percent share by acquisition channel.</p>
          <div id="sourceChart"></div>
        </div>

        <div class="panel">
          <h2>Daily Lead Volume</h2>
          <p class="subtext">Mon–Sun totals for the current week snapshot.</p>
          <div class="daily-chart" id="dailyChart"></div>
        </div>

        <div class="panel">
          <h2>Rep Funnel Performance</h2>
          <p class="subtext">Conversion rates by rep against KPI targets.</p>
          <table>
            <thead>
              <tr>
                <th>Rep</th>
                <th>Leads</th>
                <th>Avg Response</th>
                <th>Contacted</th>
                <th>Appt / Contacted</th>
                <th>Show / Appt</th>
                <th>Closed / Show</th>
                <th>Delivered / Closed</th>
                <th>Lead → Closed</th>
                <th>Lead → Appt</th>
              </tr>
            </thead>
            <tbody id="repTable"></tbody>
          </table>
          <div class="kpi-targets">
            <div class="kpi-target">Contacted &gt; 80%</div>
            <div class="kpi-target">Appt of Contacted &gt; 50%</div>
            <div class="kpi-target">Show of Appt &gt; 90%</div>
            <div class="kpi-target">Show to Closed &gt; 60%</div>
            <div class="kpi-target">Closed to Delivered &gt; 90%</div>
            <div class="kpi-target">Lead to Closed &gt; 20%</div>
            <div class="kpi-target">Lead to Appt &gt; 30%</div>
          </div>
        </div>
      </div>

      <div>
        <div class="panel">
          <h2>Funnel</h2>
          <p class="subtext">Uncontacted → Contacted → Appointed → Show → Closed → Delivered</p>
          <div class="funnel" id="funnel"></div>
          <div class="kpi-targets" id="funnelStats"></div>
        </div>

        <div class="panel">
          <h2>Recent Lead Activity</h2>
          <p class="subtext">Last 3 leads with ownership and response status.</p>
          <div id="recentLeads"></div>
        </div>
      </div>
    </div>
  </div>

  <script src="mockLeadsData.js"></script>
  <script>

    function parseDate(value) {
      return value ? new Date(value) : null;
    }

    function responseTimeSec(lead) {
      if (!lead.claimedAt || !lead.createdAt) return null;
      const start = parseDate(lead.createdAt);
      const end = parseDate(lead.claimedAt);
      return Math.max(0, Math.round((end - start) / 1000));
    }

    function getNowDate() {
      if (mockLeadsData && mockLeadsData.length) {
        const max = Math.max(...mockLeadsData.map(lead => new Date(lead.createdAt).getTime()));
        return new Date(max);
      }
      return new Date();
    }

    function toStartOfDay(date) {
      const d = new Date(date);
      d.setHours(0, 0, 0, 0);
      return d;
    }

    function toEndOfDay(date) {
      const d = new Date(date);
      d.setHours(23, 59, 59, 999);
      return d;
    }

    function getDateRange(preset, now) {
      const end = toEndOfDay(now);
      let start = toStartOfDay(now);

      if (preset === "Today") {
        start = toStartOfDay(now);
      } else if (preset === "Last 3 Days") {
        start = toStartOfDay(new Date(now.getTime() - 2 * 86400000));
      } else if (preset === "Last 7 Days") {
        start = toStartOfDay(new Date(now.getTime() - 6 * 86400000));
      } else if (preset === "Last 14 Days") {
        start = toStartOfDay(new Date(now.getTime() - 13 * 86400000));
      } else if (preset === "Last 30 Days") {
        start = toStartOfDay(new Date(now.getTime() - 29 * 86400000));
      } else if (preset === "Last 90 Days") {
        start = toStartOfDay(new Date(now.getTime() - 89 * 86400000));
      } else if (preset === "Month to Date") {
        start = new Date(now.getFullYear(), now.getMonth(), 1);
      }

      return { start, end, label: preset };
    }

    function filterLeadsByDate(leads, start, end) {
      return leads.filter(lead => {
        const created = parseDate(lead.createdAt);
        if (!created) return false;
        return created >= start && created <= end;
      });
    }

    function formatRangeLabel(start, end) {
      const opts = { month: "short", day: "numeric", year: "numeric" };
      return `${start.toLocaleDateString("en-US", opts)} – ${end.toLocaleDateString("en-US", opts)}`;
    }

    function renderKPIs(leads) {
      const claimed = leads.filter(l => l.claimedAt);
      const times = claimed.map(responseTimeSec).filter(v => v !== null);
      const avg = times.length ? Math.round(times.reduce((a, b) => a + b, 0) / times.length) : 0;
      const under60 = times.length ? Math.round((times.filter(t => t < 60).length / times.length) * 100) : 0;
      const under120 = times.length ? Math.round((times.filter(t => t < 120).length / times.length) * 100) : 0;

      document.getElementById("kpiTotal").innerText = leads.length;
      document.getElementById("kpiAvg").innerText = avg;
      document.getElementById("kpiUnder60").innerText = `${under60}%`;
      document.getElementById("kpiUnder120").innerText = `${under120}%`;
    }

    function renderSourceChart(leads) {
      const container = document.getElementById("sourceChart");
      container.innerHTML = "";
      const total = leads.length || 1;

      sources.forEach(source => {
        const count = leads.filter(l => l.source === source).length;
        const percent = Math.round((count / total) * 100);

        const row = document.createElement("div");
        row.className = "bar-row";

        const label = document.createElement("div");
        label.innerText = source;

        const bar = document.createElement("div");
        bar.className = "bar";
        const fill = document.createElement("div");
        fill.className = "bar-fill";
        fill.style.width = `${percent}%`;
        bar.appendChild(fill);

        const stat = document.createElement("div");
        stat.innerText = `${count} (${percent}%)`;

        row.appendChild(label);
        row.appendChild(bar);
        row.appendChild(stat);
        container.appendChild(row);
      });
    }

    function renderDailyChart(leads) {
      const chart = document.getElementById("dailyChart");
      chart.innerHTML = "";
      const days = ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"];
      const counts = new Array(7).fill(0);

      leads.forEach(lead => {
        const created = parseDate(lead.createdAt);
        if (!created) return;
        const index = (created.getDay() + 6) % 7;
        counts[index]++;
      });

      const max = Math.max(...counts, 1);

      days.forEach((day, idx) => {
        const wrapper = document.createElement("div");
        wrapper.className = "day-bar";

        const fill = document.createElement("div");
        fill.className = "fill";
        fill.style.height = `${Math.round((counts[idx] / max) * 100)}%`;

        const label = document.createElement("div");
        label.className = "label";
        label.innerText = day;

        wrapper.appendChild(fill);
        wrapper.appendChild(label);
        chart.appendChild(wrapper);
      });
    }

    function renderRepTable(leads) {
      const body = document.getElementById("repTable");
      body.innerHTML = "";
      const reps = {};
      const allReps = ["Eric", "Brady", "Sumit", "Vlad", "Doug", "Bob", "Sonny", "Marcus"];

      allReps.forEach(rep => {
        reps[rep] = { name: rep, leads: [], times: [] };
      });

      leads.forEach(lead => {
        const rep = lead.claimedBy || null;
        if (rep && reps[rep]) {
          reps[rep].leads.push(lead);
          const time = responseTimeSec(lead);
          if (time !== null) reps[rep].times.push(time);
        }
      });

      function pct(n, d) {
        if (!d) return 0;
        return Math.round((n / d) * 100);
      }

      function badge(value, target) {
        if (value >= target) return `<span class="badge good">${value}%</span>`;
        if (value >= target * 0.8) return `<span class="badge warn">${value}%</span>`;
        return `<span class="badge bad">${value}%</span>`;
      }

      const repList = Object.values(reps).map(rep => {
        const total = rep.leads.length || 0;
        const contacted = rep.leads.filter(l => l.stage !== "Uncontacted").length;
        const appointed = rep.leads.filter(l => ["Appointed", "Show", "Closed", "Delivered"].includes(l.stage)).length;
        const showed = rep.leads.filter(l => ["Show", "Closed", "Delivered"].includes(l.stage)).length;
        const closed = rep.leads.filter(l => ["Closed", "Delivered"].includes(l.stage)).length;
        const delivered = rep.leads.filter(l => l.stage === "Delivered").length;

        const avg = rep.times.length ? Math.round(rep.times.reduce((a, b) => a + b, 0) / rep.times.length) : 0;

        return {
          name: rep.name,
          total,
          avg,
          contactedPct: pct(contacted, total),
          appointedPct: pct(appointed, contacted),
          showPct: pct(showed, appointed),
          closePct: pct(closed, showed),
          deliveredPct: pct(delivered, closed),
          leadToClosed: pct(closed, total),
          leadToAppt: pct(appointed, total)
        };
      }).sort((a, b) => b.total - a.total);

      let fastest = null;
      repList.forEach(rep => {
        if (!fastest || rep.avg < fastest.avg) fastest = rep;
      });

      repList.forEach(rep => {
        const row = document.createElement("tr");
        if (fastest && rep.name === fastest.name) row.classList.add("highlight");
        row.innerHTML = `
          <td>${rep.name}</td>
          <td>${rep.total}</td>
          <td>${rep.avg}s</td>
          <td>${badge(rep.contactedPct, 80)}</td>
          <td>${badge(rep.appointedPct, 50)}</td>
          <td>${badge(rep.showPct, 90)}</td>
          <td>${badge(rep.closePct, 60)}</td>
          <td>${badge(rep.deliveredPct, 90)}</td>
          <td>${badge(rep.leadToClosed, 20)}</td>
          <td>${badge(rep.leadToAppt, 30)}</td>
        `;
        body.appendChild(row);
      });
    }

    function renderFunnel(leads) {
      const container = document.getElementById("funnel");
      const stats = document.getElementById("funnelStats");
      container.innerHTML = "";
      stats.innerHTML = "";

      const counts = {
        Uncontacted: leads.filter(l => l.stage === "Uncontacted").length,
        Contacted: leads.filter(l => l.stage !== "Uncontacted").length,
        Appointed: leads.filter(l => ["Appointed", "Show", "Closed", "Delivered"].includes(l.stage)).length,
        Show: leads.filter(l => ["Show", "Closed", "Delivered"].includes(l.stage)).length,
        Closed: leads.filter(l => ["Closed", "Delivered"].includes(l.stage)).length,
        Delivered: leads.filter(l => l.stage === "Delivered").length
      };

      function pct(n, d) {
        if (!d) return 0;
        return Math.round((n / d) * 100);
      }

      stages.forEach(stage => {
        const count = counts[stage] || 0;
        const step = document.createElement("div");
        step.className = "funnel-step";
        step.innerHTML = `
          <div class="count">${count}</div>
          <div class="label">${stage}</div>
        `;
        container.appendChild(step);
      });

      const contactedPct = pct(counts.Contacted, leads.length);
      const appointedPct = pct(counts.Appointed, counts.Contacted);
      const showPct = pct(counts.Show, counts.Appointed);
      const closePct = pct(counts.Closed, counts.Show);
      const deliveredPct = pct(counts.Delivered, counts.Closed);
      const leadToClosed = pct(counts.Closed, leads.length);
      const leadToAppt = pct(counts.Appointed, leads.length);

      const statsList = [
        `Contacted: ${contactedPct}% (KPI > 80%)`,
        `Appointed of Contacted: ${appointedPct}% (KPI > 50%)`,
        `Show of Appointed: ${showPct}% (KPI > 90%)`,
        `Show to Closed: ${closePct}% (KPI > 60%)`,
        `Closed to Delivered: ${deliveredPct}% (KPI > 90%)`,
        `Lead to Closed: ${leadToClosed}% (KPI > 20%)`,
        `Lead to Appt: ${leadToAppt}% (KPI > 30%)`
      ];

      statsList.forEach(text => {
        const card = document.createElement("div");
        card.className = "kpi-target";
        card.innerText = text;
        stats.appendChild(card);
      });
    }

    function renderRecent(leads) {
      const container = document.getElementById("recentLeads");
      container.innerHTML = "";
      const sorted = [...leads].sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
      const recent = sorted.slice(0, 3);

      recent.forEach(lead => {
        const time = responseTimeSec(lead);
        const status = lead.status || (lead.claimedAt ? "CLAIMED" : "OPEN");
        const claimedBy = lead.claimedBy || "—";
        const responseLabel = time !== null ? `${time}s` : "Unclaimed";
        const row = document.createElement("div");
        row.className = "recent-item";
        row.innerHTML = `
          <div>${lead.source}</div>
          <div>${lead.vehicle}</div>
          <div class="${!lead.claimedAt ? "flag" : ""}">${status}</div>
          <div>${claimedBy}</div>
          <div class="${!lead.claimedAt ? "flag" : ""}">${responseLabel}</div>
        `;
        container.appendChild(row);
      });
    }

    const presets = [
      "Today",
      "Last 3 Days",
      "Last 7 Days",
      "Last 14 Days",
      "Last 30 Days",
      "Month to Date",
      "Last 90 Days",
      "Custom Range"
    ];

    const rangeButtons = document.getElementById("rangeButtons");
    const customRange = document.getElementById("customRange");
    const customStart = document.getElementById("customStart");
    const customEnd = document.getElementById("customEnd");
    const rangeSelected = document.getElementById("rangeSelected");

    let activePreset = "Last 7 Days";
    let currentRange = null;

    function applyRange(range, labelOverride = null) {
      currentRange = range;
      const filtered = filterLeadsByDate(mockLeadsData, range.start, range.end);
      renderKPIs(filtered);
      renderSourceChart(filtered);
      renderDailyChart(filtered);
      renderRepTable(filtered);
      renderFunnel(filtered);
      renderRecent(filtered);
      const label = labelOverride || range.label;
      rangeSelected.innerText = labelOverride || `${label} • ${formatRangeLabel(range.start, range.end)}`;
    }

    function setActivePreset(preset) {
      activePreset = preset;
      [...rangeButtons.children].forEach(btn => {
        btn.classList.toggle("active", btn.dataset.preset === preset);
      });

      const now = getNowDate();
      if (preset === "Custom Range") {
        customRange.classList.add("show");
        rangeSelected.innerText = "Custom Range";
        return;
      }

      customRange.classList.remove("show");
      const range = getDateRange(preset, now);
      applyRange(range);
    }

    presets.forEach(preset => {
      const btn = document.createElement("button");
      btn.className = "range-btn";
      btn.dataset.preset = preset;
      btn.type = "button";
      btn.innerText = preset;
      btn.addEventListener("click", () => setActivePreset(preset));
      rangeButtons.appendChild(btn);
    });

    function applyCustomRange() {
      if (!customStart.value || !customEnd.value) return;
      const start = toStartOfDay(new Date(customStart.value));
      const end = toEndOfDay(new Date(customEnd.value));
      applyRange({ start, end, label: "Custom Range" }, formatRangeLabel(start, end));
    }

    customStart.addEventListener("change", applyCustomRange);
    customEnd.addEventListener("change", applyCustomRange);

    setActivePreset("Last 7 Days");
  </script>
</body>
</html>
